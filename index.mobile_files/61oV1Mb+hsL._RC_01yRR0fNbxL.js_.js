(function(g){var n=window.AmazonUIPageJS||window.P,u=n._namespace||n.attributeErrors,t=u?u("AudibleBrickCityBaseAssets",""):n;t.guardFatal?t.guardFatal(g)(t,window):t.execute(function(){g(t,window)})})(function(g,n,u){function t(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function t(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function t(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");
}function x(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b}function y(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function t(c,b){if(!(c instanceof
b))throw new TypeError("Cannot call a class as a function");}function F(c,b,e){b in c?Object.defineProperty(c,b,{value:e,enumerable:!0,configurable:!0,writable:!0}):c[b]=e;return c}function t(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function x(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b}function y(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function t(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function x(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b}function y(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function t(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function x(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b}function y(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function t(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function x(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b}function y(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function t(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function x(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b}function y(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function t(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}function x(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b}function y(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function t(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");}g.when("live").register("accessibleClick",function(c){function b(b){return function(d){if(13===d.keyCode||32===d.keyCode){if(d.target){var a=d.target.getAttribute("disabled")||d.target.getAttribute("aria-disabled");if(a&&
"false"!==a)return}d.preventDefault();b.call(this,d)}}}return{addEventListener:function(c,d){if(!c||"function"!==typeof c.addEventListener)throw Error("accessibleClick.addEventListener: Invalid element");if("function"!==typeof d)throw Error("accessibleClick.addEventListener: Invalid handler");c.addEventListener("click",d);c.addEventListener("keydown",b(d))},live:function(e,d){if("string"!==typeof e)throw Error("accessibleClick.live: Invalid querySelector");if("function"!==typeof d)throw Error("accessibleClick.live: Invalid handler");
c("click",e,d);c("keydown",e,b(d))}}});"use strict";g.register("boxUtility",function(){function c(a,b){return 2<arguments.length&&arguments[2]!==u&&arguments[2]?a.top>=b.top&&a.bottom<=b.bottom&&a.left>=b.left&&a.right<=b.right:a.top<b.bottom&&a.bottom>b.top&&a.left<b.right&&a.right>b.left}function b(a,b){var c=a.getBoundingClientRect&&a.getBoundingClientRect();if(!c||c.left===u){for(var c={top:0,left:0},e=a.offsetWidth,l=a.offsetHeight;a;)a&&(c.top+=a.offsetTop||0,c.left+=a.offsetLeft||0),a=a.offsetParent;
b&&(c.top-=d.scrollTop,c.left-=d.scrollLeft);c.bottom=c.top+l;c.right=c+e;return c}a={left:c.left,top:c.top,right:c.right,bottom:c.bottom};b||(c=d,b=c.scrollTop,c=c.scrollLeft,a.top+=b,a.bottom+=b,a.left+=c,a.right+=c);return a}function e(){if("visualViewport"in n){var b=n.visualViewport;return{width:b.width,height:b.height,left:b.pageLeft,top:b.pageTop,right:b.pageLeft+b.width,bottom:b.pageTop+b.height}}return{width:a.clientWidth,height:a.clientHeight,left:d.scrollLeft,top:d.scrollTop}}var d=document.scrollingElement||
document.documentElement||document.body.parentNode;"number"!==typeof d.scrollLeft&&(d=document.body);var a=document.documentElement||document.body;return{getBox:function(a){var b=a.getBoundingClientRect&&a.getBoundingClientRect();return b&&b.width!==u?{width:b.width,height:b.height}:{width:a.offsetWidth,height:a.offsetHeight}},getAbsoluteOffset:function(a){return b(a,!1)},getViewportOffset:function(a){return b(a,!0)},getScrollElement:function(){return d},getViewportBox:e,isInView:function(a){var d=
1<arguments.length&&arguments[1]!==u?arguments[1]:!1,k=2<arguments.length&&arguments[2]!==u?arguments[2]:!1;if(!a||null==a.offsetParent)return!1;var h=b(a,!1),l=e();if(!c(h,l,k))return!1;for(l=a.offsetParent;d&&l;){if("visible"!==(n.getComputedStyle&&n.getComputedStyle(l)||l.style).getPropertyValue("overflow")){var C=b(l,!1);if(!c(h,C,k))return!1}l=l.offsetParent}return!0}}});"use strict";g.when("accessibleClick","button","Overlay","Spinner").execute(function(c,b,e,d){c.live(".bc-click-behavior",
function(a){a=this.getAttribute("data-click-behavior")||"disable";var c=this.getAttribute("data-click-behavior-overlay-type")||u,m=this.getAttribute("data-click-behavior-overlay-target-id")||u,k=this.getAttribute("data-click-behavior-overlay-content")||u;this.classList.remove("bc-click-behavior");var h=m&&document.getElementById(m)||this,l=b.isButton(h)?h:h.querySelector(".bc-button");"disable"!==a||!l||c||m||k?"disable"===a||"overlay"===a?(h.setAttribute("aria-disabled",!0),e.create(h,c,k)):"spinner"===
a&&d.create(h,c,k).start():b.disable(l)})});"use strict";g.register("cookieUtility",function(){var c=n.location.hostname.replace(/^.*\.(audible\.[^.]*)$/,"$1");return{set:function(b,e){var d=2<arguments.length&&arguments[2]!==u?arguments[2]:{},a=d.expires,d=d.path,d=d===u?"/":d,f=[];f.push(encodeURIComponent(b)+"\x3d"+encodeURIComponent(e));a!==u&&("string"!==typeof a&&(a instanceof Date||(a=new Date(a)),a=a.toUTCString()),f.push("expires\x3d"+a));f.push("path\x3d"+d);f.push("domain\x3d"+c);f.push("secure");
document.cookie=f.join("; ")},get:function(b){b=new RegExp(b+"\x3d([^;]*)");for(var c=document.cookie.split(";"),d=0;d<c.length;d++){var a=b.exec(c[d]);if(a)return decodeURIComponent(a[1])}}}});"use strict";g.register("debounce",function(){return function(c){var b=1<arguments.length&&arguments[1]!==u?arguments[1]:0,e=2<arguments.length&&arguments[2]!==u?arguments[2]:null;if(null!==e&&b>=e)throw Error("debounce([fn], "+b+", "+e+"): minDelay must be less than maxDelay");var d=null,a=null;return function(){var f=
this,m=arguments;clearTimeout(d);d=setTimeout(function(){clearTimeout(a);d=a=null;c.apply(f,m)},b);null===a&&null!==e&&(a=setTimeout(function(){clearTimeout(d);d=a=null;c.apply(f,m)},e))}}});"use strict";g.when("ready","outsideContainer").register("focus",function(){return new function(){var c,b,e=document.getElementsByClassName("adbl-page")[0],d=document.getElementById("bc-outside-container"),a=[],f=function(a){return function(b){a:{for(b=b.target.parentNode;null!==b;){if(b===a){b=!0;break a}b=b.parentNode}b=
!1}!1===b&&a.focus()}},m=function(a){d.contains(a)||(a.setAttribute("aria-hidden",!0),d.appendChild(a))},k=function(a){return function(){c&&(document.removeEventListener("focusin",c,!0),c=u,b&&(b.tabIndex=-1,b.setAttribute("aria-hidden",!0)));h(a.focusElement);if(a.focusContainer){var d=a.focusContainer;b=d;c=f(d);b.setAttribute("aria-hidden",!1);b.tabIndex=0;e.setAttribute("aria-hidden",!0);document.addEventListener("focusin",c,!0)}a.isFocusOnLayer||e.setAttribute("aria-hidden",!1)}},h=function(a){a.tabIndex=
0;n.setTimeout(function(){a.focus()},500)},l=function(a){var b=a.getAttribute("data-shift-focus"),d=a.getAttribute("data-contain-focus");return{focusElement:document.getElementById(b),focusContainer:document.getElementById(d),isFocusOnLayer:a.getAttribute("data-shift-layer")}};return{init:function(b){b=b.querySelectorAll(".bc-trigger");if(0<b.length)for(var d=0;d<b.length;d++)if(b[d].hasAttribute("data-shift-focus")){var c=b[d],f=l(c);f.focusContainer&&m(f.focusContainer);f=k(f);c.addEventListener("click",
f);a.push({trigger:c,evnt:f})}},transform:l,change:function(a){a.hasOwnProperty("focusContainer")&&(a.focusContainer?m(a.focusContainer):a.focusContainer=null);return k(a)},updateTrigger:function(b,d){for(var c=a.length,f=0;f<c;f++)a[f].trigger===b&&(a[f].trigger.removeEventListener("click",a[f].evnt),b.addEventListener("click",d),a[f]={trigger:b,evnt:d})},createTrigger:function(b,d){b.addEventListener("click",d);a.push({trigger:b,evnt:d})},removeAllEvents:function(){for(var b=a.length,d=0;d<b;d++)a[d].trigger.removeEventListener("click",
a[d].evnt);a=[]},trapFocus:function(a){null!==a&&a!==u&&a.addEventListener("keydown",function(b){if("Tab"===b.key||9===b.keyCode){var d=a.querySelectorAll('button, a, input, select, textarea, [tabindex\x3d"0"], [tabindex\x3d"1"]');if(d.length){for(var c=d[0],f,e=d.length-1;-1<e&&(f=d[e],f.disabled);e--);b.shiftKey?document.activeElement===c&&(f.focus(),b.preventDefault()):document.activeElement===f&&(c.focus(),b.preventDefault())}}})},FOCUSABLE_SELECTOR:'button, a, input, select, textarea, [tabindex\x3d"0"], [tabindex\x3d"1"]'}}});
g.when("focus").execute(function(c){c.init(document)});"use strict";g.when("ready").register("lazyload",function(){return function(c,b){c=c.querySelectorAll(b);[].forEach.call(c,function(c){c.src=c.getAttribute("data-lazyload");c.classList.remove(b)})}});g.when("lazyload").register("lazyloadInit",function(c){c(document,".bc-lazy-load")});"use strict";g.register("live",function(){return function(c,b,e){function d(d){var c=document.querySelectorAll(b);if(c)for(var k=d.target;k;){if(-1<Array.prototype.indexOf.call(c,
k)){e.call(k,d,a);break}k=k.parentElement}}function a(){document.removeEventListener(c,d)}document.addEventListener(c,d);return a}});"use strict";g.when("fetch","ready").execute(function(){var c=document.getElementById("adbl_localization_prefs");if(c){var b=c.getAttribute("data-json"),c={};if(b)try{c=JSON.parse(b)}catch(f){"console"in n&&"error"in console&&console.error(f)}var e=c.timezoneOffset,d=c.timezoneName,b=-(new Date).getTimezoneOffset(),a="Intl"in n&&Intl.DateTimeFormat().resolvedOptions().timeZone,
e=!isNaN(b)&&e!==b,d=a&&a!==d;if(e||d)e&&(c.timezoneOffset=b),d&&(c.timezoneName=a),n.fetch("/api/prefs/localization",{method:"POST",headers:{"Content-Type":"application/json; charset\x3dutf-8"},body:JSON.stringify(c)})}});"use strict";g.register("observer",function(){var c=n.MutationObserver||n.WebKitMutationObserver,b=n.addEventListener;return function(e,d){c?(new c(function(a,b){(a[0].addedNodes.length||a[0].removedNodes.length)&&d()})).observe(e,{childList:!0,subtree:!0}):b&&(e.addEventListener("DOMNodeInserted",
d,!1),e.addEventListener("DOMNodeRemoved",d,!1))}});"use strict";g.register("readySetup",function(){function c(){if(!b)try{g.when("Polyfills").execute(function(){var b;g.now("a-base").execute(function(d){b=d});b||g.register("ready",function(){return!0})})}catch(c){}finally{b=!0}}var b=!1;"complete"===document.readyState?c():document.addEventListener?(document.addEventListener("DOMContentLoaded",c),n.addEventListener("load",c)):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&
c()})});"use strict";var q=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.register("StrictEvents",function(){var c=function(){function d(a){var b=this;t(this,d);if(!Array.isArray(a))throw new TypeError("missing eventTypes array");this._eventTypes=a;this._handlersByEventType={};this._eventTypes.forEach(function(a){b._handlersByEventType[a]=
[]})}q(d,[{key:"on",value:function(a,b,d){var c=this;a=Array.isArray(a)?a:this._splitEventTypes(a);a.forEach(function(a){c._on(a,b,d)});return function(){return c.off(a,b)}}},{key:"once",value:function(a,b,d){var c=this,e=this.on(a,function(a){e();b.call(d||c)},d);return e}},{key:"_on",value:function(a,b,d){this._checkValidEventType(a);this._handlersByEventType[a].push(new e(b,d))}},{key:"_splitEventTypes",value:function(a){return a.split(/,\s*|\s+/)}},{key:"off",value:function(a,b){var d=this;(Array.isArray(a)?
a:this._splitEventTypes(a)).forEach(function(a){return d._off(a,b)})}},{key:"_off",value:function(a,b){this._checkValidEventType(a);if(b){if("function"!==typeof b)throw new TypeError("wrong type for func argument");a in this._handlersByEventType&&(this._handlersByEventType[a]=this._handlersByEventType[a].filter(function(a){return!a.isFunc(b)}))}else this._handlersByEventType[a]=[]}},{key:"emit",value:function(a,d){this._checkValidEventType(a);var c=new b(a);return this._handlersByEventType[a].every(function(a){!1===
a.call(c,d)&&c.stopPropagation();if(!c.isPropagationStopped())return!0})}},{key:"_checkValidEventType",value:function(a){if(!this._handlersByEventType[a])throw new TypeError('eventType: "'+a+'" not supported,\n  supported event types are:\n  '+this._eventTypes.join(","));}}]);return d}(),b=function(){function b(a){t(this,b);this.eventType=a}q(b,[{key:"stopPropagation",value:function(){this._isPropagationStopped=!0}},{key:"isPropagationStopped",value:function(){return this._isPropagationStopped}}]);
return b}(),e=function(){function b(a,c){t(this,b);this._func=a;this._thisArg=c}q(b,[{key:"call",value:function(a,b){this._func.call(this._thisArg||null,a,b||{})}},{key:"isFunc",value:function(a){return this._func===a}}]);return b}();return c});"use strict";(function(){g.when("ready").execute(function(){var c=document.querySelector(".adbl-page.desktop")?!0:!1,b=document.querySelector(".adbl-page.mobile")?!0:!1;c&&(g.register("desktop",!0),g.register("device","desktop"));b&&(g.register("mobile",!0),
g.register("device","mobile"))});g.when("ready").register("outsideContainer",function(){var c=document.querySelector(".adbl-page.desktop")?!0:!1,b=document.querySelector(".adbl-page.mobile")?!0:!1,e=document.createElement("div"),d=e.className;e.setAttribute("id","bc-outside-container");c&&(d+=" desktop");b&&(d+=" mobile");e.className=d;document.body.appendChild(e)});g.register("ajax",function(){function c(b,d,a){b[d]=b[d]||a}var b=["responseType","withCredentials","timeout","onprogress"];return function(e,
d){function a(a,b){return d?function(){h||(d(l.status===u?a:l.status,0===l.status?"Error":l.response||l.responseText||b,l),h=!0)}:function(){}}var f=e.headers||{},m=e.body,k=e.method||(m?"POST":"GET"),h=!1,l;l=n.XMLHttpRequest?new XMLHttpRequest:void 0;l.open(k,e.url,!0);var C=l.onload=a(200);l.onreadystatechange=function(){4===l.readyState&&C()};l.onerror=a(null,"Error");l.ontimeout=a(null,"Timeout");l.onabort=a(null,"Abort");m&&c(f,"X-Requested-With","XMLHttpRequest");"POST"===k&&c(f,"Content-type",
"application/x-www-form-urlencoded");for(var k=0,w=b.length,p;k<w;k++)p=b[k],e[p]!==u&&(l[p]=e[p]);for(p in f)f.hasOwnProperty(p)&&l.setRequestHeader(p,f[p]);l.send(m);return l}});g.when("ajax").register("aud-ajax",function(c){return c})})();"use strict";g.when("ready").register("transitionEvent",function(){return function(){var c,b=document.createElement("fakeelement"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};
for(c in e)if(b.style[c]!==u)return e[c]}});"use strict";g.when("debounce","ready","outsideContainer").register("trayHelper",function(c){var b=function(){return function(a){var b=0,d=n.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=a.querySelectorAll(".tray-fixed");[].forEach.call(c,function(a,d){b+=a.offsetHeight});a.classList.contains("bc-tray-full-height")?a.querySelector(".tray-wrapper").style.height=d-b+"px":a.querySelector(".tray-wrapper").style.maxHeight=d-
b+"px"}},e=function(){return function(a){return(a=a.getAttribute("data-trigger"))?document.getElementById(a):null}},d;return{get:e,setHeight:b,resize:function(a){var d=e(),m=b();return c(function(){var b,c;for(c=0;c<a.length;c++)a[c].getAttribute("data-trigger")&&(b=d(a[c]),m(b))},500)},lockBody:function(a){var b=document.body,c=b.classList;"add"===a?(d=b.scrollTop||document.documentElement.scrollTop,b.style.top=d?"-"+d+"px":0,b.style.position="fixed"):(b.style.removeProperty?(b.style.removeProperty("top"),
b.style.removeProperty("position")):(b.style.removeAttribute("top"),b.style.removeAttribute("position")),(document.scrollingElement||document.documentElement).scrollTop=d);c[a]("bc-locked")}}});"use strict";var D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"===typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};g.register("promise",function(){function c(){function b(){}function c(a,b){return function(){a.apply(b,
arguments)}}function d(a){if("object"!==D(this))throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=u;this._deferreds=[];l(a,this)}function a(a,b){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(b):(a._handled=!0,d._immediateFn(function(){var c=1===a._state?b.onFulfilled:b.onRejected;if(null===c)(1===a._state?f:m)(b.promise,a._value);else{var d;try{d=c(a._value)}catch(e){m(b.promise,
e);return}f(b.promise,d)}}))}function f(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"===("undefined"===typeof b?"undefined":D(b))||"function"===typeof b)){var f=b.then;if(b instanceof d){a._state=3;a._value=b;k(a);return}if("function"===typeof f){l(c(f,b),a);return}}a._state=1;a._value=b;k(a)}catch(h){m(a,h)}}function m(a,b){a._state=2;a._value=b;k(a)}function k(b){2===b._state&&0===b._deferreds.length&&d._immediateFn(function(){b._handled||d._unhandledRejectionFn(b._value)});
for(var c=0,f=b._deferreds.length;c<f;c++)a(b,b._deferreds[c]);b._deferreds=null}function h(a,b,c){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.promise=c}function l(a,b){var c=!1;try{a(function(a){c||(c=!0,f(b,a))},function(a){c||(c=!0,m(b,a))})}catch(d){c||(c=!0,m(b,d))}}var C=setTimeout;d.prototype["catch"]=function(a){return this.then(null,a)};d.prototype.then=function(c,d){var f=new this.constructor(b);a(this,new h(c,d,f));return f};d.all=function(a){var b=
Array.prototype.slice.call(a);return new d(function(a,c){function d(e,k){try{if(k&&("object"===("undefined"===typeof k?"undefined":D(k))||"function"===typeof k)){var m=k.then;if("function"===typeof m){m.call(k,function(a){d(e,a)},c);return}}b[e]=k;0===--f&&a(b)}catch(h){c(h)}}if(0===b.length)return a([]);for(var f=b.length,e=0;e<b.length;e++)d(e,b[e])})};d.resolve=function(a){return a&&"object"===("undefined"===typeof a?"undefined":D(a))&&a.constructor===d?a:new d(function(b){b(a)})};d.reject=function(a){return new d(function(b,
c){c(a)})};d.race=function(a){return new d(function(b,c){for(var d=0,f=a.length;d<f;d++)a[d].then(b,c)})};d._immediateFn="function"===typeof n.setImmediate&&function(a){n.setImmediate(a)}||function(a){C(a,0)};d._unhandledRejectionFn=function(a){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};d._setImmediateFn=function(a){d._immediateFn=a};d._setUnhandledRejectionFn=function(a){d._unhandledRejectionFn=a};return d}return"function"===typeof n.Promise?n.Promise:
n.Promise=c});"use strict";g.when("promise").register("fetch",function(){(function(c){function b(a){"string"!==typeof a&&(a=String(a));if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function e(a){"string"!==typeof a&&(a=String(a));return a}function d(a){var b={next:function(){var b=a.shift();return{done:b===u,value:b}}};v.iterable&&(b[Symbol.iterator]=function(){return b});return b}function a(b){this.map={};b instanceof
a?b.forEach(function(a,b){this.append(b,a)},this):b&&Object.getOwnPropertyNames(b).forEach(function(a){this.append(a,b[a])},this)}function f(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function m(a){return new Promise(function(b,c){a.onload=function(){b(a.result)};a.onerror=function(){c(a.error)}})}function k(a){var b=new FileReader;b.readAsArrayBuffer(a);return m(b)}function h(){this.bodyUsed=!1;this._initBody=function(a){this._bodyInit=a;if("string"===typeof a)this._bodyText=
a;else if(v.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(v.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(!a)this._bodyText="";else if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(a))throw Error("unsupported BodyInit type");this.headers.get("content-type")||("string"===typeof a?this.headers.set("content-type","text/plain;charset\x3dUTF-8"):this._bodyBlob&&
this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset\x3dUTF-8"))};v.blob?(this.blob=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(k)},
this.text=function(){var a=f(this);if(a)return a;if(this._bodyBlob){var a=this._bodyBlob,b=new FileReader;b.readAsText(a);return m(b)}if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var a=f(this);return a?a:Promise.resolve(this._bodyText)};v.formData&&(this.formData=function(){return this.text().then(C)});this.json=function(){return this.text().then(JSON.parse)};return this}function l(b,c){c=c||{};var d=c.body;
if(l.prototype.isPrototypeOf(b)){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url;this.credentials=b.credentials;c.headers||(this.headers=new a(b.headers));this.method=b.method;this.mode=b.mode;d||(d=b._bodyInit,b.bodyUsed=!0)}else this.url=b;this.credentials=c.credentials||this.credentials||"omit";if(c.headers||!this.headers)this.headers=new a(c.headers);b=c.method||this.method||"GET";var f=b.toUpperCase();this.method=-1<t.indexOf(f)?f:b;this.mode=c.mode||this.mode||null;this.referrer=
null;if(("GET"===this.method||"HEAD"===this.method)&&d)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(d)}function C(a){var b=new FormData;a.trim().split("\x26").forEach(function(a){if(a){var c=a.split("\x3d");a=c.shift().replace(/\+/g," ");c=c.join("\x3d").replace(/\+/g," ");b.append(decodeURIComponent(a),decodeURIComponent(c))}});return b}function g(b){var c=new a;(b.getAllResponseHeaders()||"").trim().split("\n").forEach(function(a){var b=a.trim().split(":");a=b.shift().trim();
b=b.join(":").trim();c.append(a,b)});return c}function p(b,c){c||(c={});this.type="default";this.status=c.status;this.ok=200<=this.status&&300>this.status;this.statusText=c.statusText;this.headers=c.headers instanceof a?c.headers:new a(c.headers);this.url=c.url||"";this._initBody(b)}if(!c.fetch){var r="Symbol"in c&&"iterator"in Symbol,n;if(n="FileReader"in c&&"Blob"in c)try{new Blob,n=!0}catch(A){n=!1}var v={searchParams:"URLSearchParams"in c,iterable:r,blob:n,formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in
c};a.prototype.append=function(a,c){a=b(a);c=e(c);var d=this.map[a];d||(d=[],this.map[a]=d);d.push(c)};a.prototype["delete"]=function(a){delete this.map[b(a)]};a.prototype.get=function(a){return(a=this.map[b(a)])?a[0]:null};a.prototype.getAll=function(a){return this.map[b(a)]||[]};a.prototype.has=function(a){return this.map.hasOwnProperty(b(a))};a.prototype.set=function(a,c){this.map[b(a)]=[e(c)]};a.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(c){this.map[c].forEach(function(d){a.call(b,
d,c,this)},this)},this)};a.prototype.keys=function(){var a=[];this.forEach(function(b,c){a.push(c)});return d(a)};a.prototype.values=function(){var a=[];this.forEach(function(b){a.push(b)});return d(a)};a.prototype.entries=function(){var a=[];this.forEach(function(b,c){a.push([c,b])});return d(a)};v.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var t="DELETE GET HEAD OPTIONS POST PUT".split(" ");l.prototype.clone=function(){return new l(this)};h.call(l.prototype);h.call(p.prototype);
p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})};p.error=function(){var a=new p(null,{status:0,statusText:""});a.type="error";return a};var q=[301,302,303,307,308];p.redirect=function(a,b){if(-1===q.indexOf(b))throw new RangeError("Invalid status code");return new p(null,{status:b,headers:{location:a}})};c.Headers=a;c.Request=l;c.Response=p;c.fetch=function(a,b){return new Promise(function(c,d){var f;
f=l.prototype.isPrototypeOf(a)&&!b?a:new l(a,b);var e=new XMLHttpRequest;"onload"in e||(e.onreadystatechange=function(){if(4==e.readyState){var a=1223===e.status?204:e.status;!a||200<=a&&300>a||304==a?e.onload&&e.onload():e.onerror&&e.onerror();e.onreadystatechange=null}});e.onload=function(){var a=e.status,b=e.statusText,d=g(e),f;f="responseURL"in e?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):void 0;c(new p("response"in e?e.response:e.responseText,
{status:a,statusText:b,headers:d,url:f}))};e.onerror=function(){d(new TypeError("Network request failed"))};e.ontimeout=function(){d(new TypeError("Network request failed"))};e.open(f.method,f.url,!0);"include"===f.credentials&&(e.withCredentials=!0);"responseType"in e&&v.blob&&(e.responseType="blob");f.headers.forEach(function(a,b){e.setRequestHeader(b,a)});e.send("undefined"===typeof f._bodyInit?null:f._bodyInit)})};c.fetch.polyfill=!0}})(n)});"use strict";g.when("readySetup").register("Polyfills",
function(){(function(){function c(a){this.el=a;a=a.className.replace(/^\s+|\s+$/g,"").split(/\s+/);for(var b=0;b<a.length;b++)d.call(this,a[b])}function b(a,b,c){Object.defineProperty?Object.defineProperty(a,b,{get:c}):a.__defineGetter__(b,c)}if(!("undefined"===typeof n.Element||"classList"in document.documentElement)){var e=Array.prototype,d=e.push,a=e.splice,f=e.join;c.prototype={add:function(){for(var a=0;a<=arguments.length;a++)d.call(this,arguments[a]);this.el.className=this.toString()},contains:function(a){return-1!=
this.el.className.indexOf(a)},item:function(a){return this[a]||null},remove:function(b){if(this.contains(b)){for(var c=0;c<this.length&&this[c]!=b;c++);a.call(this,c,1);this.el.className=this.toString()}},toString:function(){return f.call(this," ")},toggle:function(a){this.contains(a)?this.remove(a):this.add(a);return this.contains(a)}};n.DOMTokenList=c;b(Element.prototype,"classList",function(){return new c(this)})}})();(function(){var c=document.createElement("div");c.classList.add("c1","c2");c.classList.contains("c2")||
(c=function(b){var c=DOMTokenList.prototype[b];DOMTokenList.prototype[b]=function(b){var a,f=arguments.length;for(a=0;a<f;a++)b=arguments[a],c.call(this,b)}},c("add"),c("remove"))})();(function(){if(!document.getElementsByClassName){var c=[].indexOf||function(b){for(var c=0;c<this.length;c++)if(this[c]===b)return c;return-1};getElementsByClassName=function(b,e){if(document.querySelectorAll)b=e.querySelectorAll("."+b);else{e=e.getElementsByTagName("*");for(var d=[],a=0;a<e.length;a++)e[a].className&&
-1<(" "+e[a].className+" ").indexOf(" "+b+" ")&&-1===c.call(d,e[a])&&d.push(e[a]);b=d}return b};document.getElementsByClassName=function(b){return getElementsByClassName(b,document)};Element&&(Element.prototype.getElementsByClassName=function(b){return getElementsByClassName(b,this)})}})();(function(c,b,e){if((!c.addEventListener||!c.removeEventListener)&&c.attachEvent&&c.detachEvent){var d=function(a,b){if(b=b[e])for(var c,d=b.length;d--;)if(c=b[d],c[0]===a)return c[1]},a=function(a,b,c){var f=b[e]||
(b[e]=[]);return d(a,b)||(f[f.length]=[a,c],c)},f=function(a){var c=b[a];b[a]=function(a){return h(c(a))}},m=function(d,f,e){if("function"===typeof f){var k=this;k.attachEvent("on"+d,a(k,f,function(a){a=a||c.event;a.preventDefault=a.preventDefault||function(){a.returnValue=!1};a.stopPropagation=a.stopPropagation||function(){a.cancelBubble=!0};a.target=a.target||a.srcElement||b.documentElement;a.currentTarget=a.currentTarget||k;a.timeStamp=a.timeStamp||(new Date).getTime();f.call(k,a)}))}},k=function(a,
b,c){"function"===typeof b&&(b=d(this,b))&&this.detachEvent("on"+a,b)},h=function(a){var b=a.length;if(b)for(;b--;)a[b].addEventListener=m,a[b].removeEventListener=k;else a.addEventListener=m,a.removeEventListener=k;return a};h([b,c]);"Element"in c?(f=c.Element,f.prototype.addEventListener=m,f.prototype.removeEventListener=k):(b.attachEvent("onreadystatechange",function(){h(b.all)}),f("getElementsByTagName"),f("getElementById"),f("createElement"),h(b.all))}})(n,document,"x-ms-event-listeners");(function(c,
b,e){Array.isArray||(Array.isArray=function(b){return"[object Array]"===Object.prototype.toString.call(b)})})();Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c,b){if(null==this)throw TypeError('"this" is null or not defined');var e=Object(this),d=e.length>>>0;if("function"!==typeof c)throw TypeError("predicate must be a function");for(var a=0;a<d;){var f=e[a];if(c.call(b,f,a,e))return f;a++}return u},configurable:!0,writable:!0});Function.prototype.bind||(Function.prototype.bind=
function(c){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),e=this,d=function(){},a=function(){return e.apply(this instanceof d?this:c,b.concat(Array.prototype.slice.call(arguments)))};this.prototype&&(d.prototype=this.prototype);a.prototype=new d;return a});(function(){try{new CustomEvent("?")}catch(c){this.CustomEvent=function(b,c){function d(a,c,d,e){this["init"+b](a,c,d,e);"detail"in
this||(this.detail=e)}return function(a,f){var m=document.createEvent(b);null!=a?d.call(m,a,(f||(f=c)).bubbles,f.cancelable,f.detail):m.initCustomEvent=d;return m}}(this.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}})();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(c){var b=this;if(!document.documentElement.contains(b))return null;
do{if(b.matches(c))return b;b=b.parentElement||b.parentNode}while(null!==b&&1===b.nodeType);return null})});"use strict";g.when("AutocompleteInput","AutocompleteDispatcher").register("autocomplete",function(c,b){return function(e,d,a){if(!HTMLElement.prototype.isPrototypeOf(e))throw Error("autocomplete: invalid wrapperElement");if("function"!==typeof d)throw Error("autocomplete: invalid getSuggestions callback");e=new c(e,a);a=e.showSuggestions.bind(e);var f=e.onInput.bind(e);new b(d,a,f);return e}});
"use strict";q=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.register("AutocompleteDispatcher",function(){return function(){function c(b,e,d){t(this,c);this._fetchSuggestions=b;this._showSuggestions=e;d(this.update.bind(this));this._debounceTimeout=this._cancel=null;this._suggestionsByQuery={}}q(c,[{key:"update",
value:function(b){var c=this;this.cancel();this.getQueryKey(b)&&(this._debounceTimeout=setTimeout(function(){c._debounceTimeout=null;c._update(b)},120))}},{key:"_update",value:function(b){var c=this,d=this.getCachedSuggestions(b);if(d)this.showSuggestions(d);else{var a=!1,f=this.fetchSuggestions(b,function(d){d?(c.cacheSuggestions(b,d),a||(c._cancel=null,c.showSuggestions(d))):g.log("Autocomplete fetchSuggestions failed","ERROR","AudibleBrickCitySkin.AutocompleteDispatcher")});this._cancel=function(){a=
!0;f&&f();c._cancel=null}}}},{key:"fetchSuggestions",value:function(b,c){return this._fetchSuggestions(b,function(b){c(b&&b.map(function(a){return"string"===typeof a?{display:a}:a}))})}},{key:"showSuggestions",value:function(b){this._showSuggestions(b)}},{key:"cancel",value:function(){null!==this._debounceTimeout?(clearTimeout(this._debounceTimeout),this._debounceTimeout=null):this._cancel&&this._cancel()}},{key:"cacheSuggestions",value:function(b,c){this._suggestionsByQuery[this.getQueryKey(b)]=
c}},{key:"getCachedSuggestions",value:function(b){return this._suggestionsByQuery[this.getQueryKey(b)]}},{key:"getQueryKey",value:function(b){return b.display}}]);return c}()});"use strict";q=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("debounce","StrictEvents").register("AutocompleteInput",function(c,
b){b=function(b){function a(b){var c=1<arguments.length&&arguments[1]!==u?arguments[1]:null;t(this,a);var d=x(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,["input","showSuggestions","hideSuggestions","repositionSuggestions"]));d._wrapperElement=b;d._goCallback=c;d._selectedSuggestionIndex=null;d._suggestionsShowing=!1;d._render();d._addEventListeners();d._inputElement.hasAttribute("data-initial-value")&&d._inputElement.getAttribute("data-initial-value")!=d._inputElement.value&&setTimeout(function(){return d.emit("input")});
return d}y(a,b);q(a,[{key:"onInput",value:function(a){var b=this;this.on("input",function(c,d){a({display:String(b._inputElement.value).trim()})})}},{key:"go",value:function(){this._go(this._selectedQueryData||{display:this._inputElement.value})}},{key:"_go",value:function(a){if(a.display&&String(a.display).trim())if(this._inputElement.value=a.display,this._goCallback)this._goCallback(a);else if(this._formElement)this._formElement.submit();else throw Error("bc:autocomplete - no go callback NOR form element found to submit");
}},{key:"showSuggestions",value:function(a){var b=this;this._selectedSuggestionIndex=null;this._suggestionsContainer.innerHTML="";this._suggestions=a.map(function(a){return new e(a,b._suggestionsContainer,b._go.bind(b))});this._noResultsElement&&(this._suggestions.length?this._noResultsElement.classList.add("bc-pub-hidden"):this._noResultsElement.classList.remove("bc-pub-hidden"));this._suggestionsShowing=!0;this._suggestionsWrapper.classList.remove("bc-pub-hidden");this._suggestionsWrapper.style.width=
this._inputElement.offsetWidth+"px";this.repositionSuggestions();this.emit("showSuggestions",{suggestionsWrapper:this._suggestionsWrapper})}},{key:"hideSuggestions",value:function(){this._suggestionsShowing=!1;this._suggestionsWrapper.classList.add("bc-pub-hidden");this.emit("hideSuggestions",{suggestionsWrapper:this._suggestionsWrapper})}},{key:"repositionSuggestions",value:function(){if(this._suggestionsShowing){var a=this._getSpaceAroundInput();if(a!==u){var b=a.spaceAbove,a=a.spaceBelow,c=this._suggestionsWrapper.offsetHeight<
a||a>b;this._suggestionsWrapper.style.overflow="auto";this._suggestionsWrapper.style[c?"bottom":"top"]="";this._suggestionsWrapper.style[c?"top":"bottom"]=this._inputElement.offsetHeight+"px";this._suggestionsWrapper.style.maxHeight=(c?a:b)+"px";this._suggestionsWrapper.classList[c?"add":"remove"]("bc-autocomplete-suggestions-below");this._suggestionsWrapper.classList[c?"remove":"add"]("bc-autocomplete-suggestions-above");this.emit("repositionSuggestions",{suggestionsWrapper:this._suggestionsWrapper,
showBelow:c,spaceAbove:b,spaceBelow:a})}}}},{key:"_getSpaceAroundInput",value:function(){if(this._inputElement.getBoundingClientRect){var a=this._inputElement.getBoundingClientRect();if(a.top!==u)return{spaceAbove:a.top,spaceBelow:n.innerHeight-a.bottom}}}},{key:"_render",value:function(){this._formElement=this._wrapperElement.querySelector("form");this._inputElement=this._wrapperElement.querySelector("input");this._suggestionsWrapper=this._wrapperElement.getElementsByClassName("bc-autocomplete-suggestions-wrapper")[0];
this._suggestionsContainer=this._wrapperElement.getElementsByClassName("bc-autocomplete-suggestions-container")[0];this._noResultsElement=this._suggestionsWrapper.getElementsByClassName("bc-autocomplete-no-results")[0]}},{key:"_addEventListeners",value:function(){var a=this;this._inputElement.addEventListener("keyup",function(b){switch(b.keyCode){case 40:a.selectNext();break;case 38:a.selectPrevious();break;case 27:a.hideSuggestions()}});this._inputElement.addEventListener("blur",this.hideSuggestions.bind(this));
this._suggestionsWrapper.addEventListener("mousedown",function(a){return a.preventDefault()});this._suggestionsWrapper.addEventListener("click",function(b){return setTimeout(a.hideSuggestions.bind(a))});this._formElement&&this._formElement.addEventListener("submit",function(b){b.preventDefault();a.go()});this._inputElement.addEventListener("input",this.emit.bind(this,["input"]));this.onInput(function(b){a._selectedQueryData&&b.display!==a._selectedQueryData.display&&(a._selectedQueryData=b);b.display||
a.hideSuggestions()});var b=c(this.repositionSuggestions.bind(this),100);n.addEventListener("resize",b);n.addEventListener("scroll",b)}},{key:"selectNext",value:function(){this.select(null===this._selectedSuggestionIndex?0:(this._selectedSuggestionIndex+1)%this._suggestions.length)}},{key:"selectPrevious",value:function(){this.select((this._selectedSuggestionIndex||this._suggestions.length)-1)}},{key:"select",value:function(a){var b=null!==this._selectedSuggestionIndex&&this._suggestions[this._selectedSuggestionIndex];
b&&b.deselect();this._selectedSuggestionIndex=a;a=this._suggestions[a];a.select();this._inputElement.value=a.queryData.display;this._selectedQueryData=a.queryData}}]);return a}(b);var e=function(){function b(a,c,e){t(this,b);this.queryData=a;var k=this.element=document.createElement("div");k.innerHTML=a.display;this.queryData.display=k.innerHTML;k.classList.add("bc-autocomplete-suggestion-row");k.classList.add("bc-autocomplete-suggestion-link");c.appendChild(k);k.addEventListener("click",function(){return e(a)})}
q(b,[{key:"select",value:function(){this.element.classList.add("bc-autocomplete-selected")}},{key:"deselect",value:function(){this.element.classList.remove("bc-autocomplete-selected")}}]);return b}();return b});"use strict";g.when("trayHelper","transitionEvent","focus","ready","mobile").register("actionsheet",function(c,b,e){var d;return new function(){function a(a){document.querySelectorAll(".action-sheet-active")[0]?(d.classList.remove("bc-hidden"),c.lockBody("add")):(d.classList.add("bc-hidden"),
c.lockBody("remove"),a&&a())}function f(a,b){q?a.addEventListener(q,function G(c){a.removeEventListener(q,G);b()}):setTimeout(b)}function m(b,c){c=!1;"string"===typeof b&&(b=document.getElementById(b));p!==b&&(w=p,p=b);w&&(c=w.classList.contains("action-sheet-active"));!0===c?(f(w,function(){p.style.visibility="visible";p.classList.add("show-tray");p.classList.add("action-sheet-active")}),w.classList.remove("action-sheet-active"),w.classList.remove("show-tray")):(p.classList.contains("action-sheet-active")?
(p.classList.remove("show-tray"),p.classList.remove("action-sheet-active"),f(p,function(){p.style.visibility="hidden"})):(p.classList.add("action-sheet-active"),p.classList.add("show-tray"),p.style.visibility="visible"),a())}function k(){var b;b=p.getElementsByClassName("bc-core-actionsheet-cancel")[0];b.hasAttribute("data-shift-focus")?(b=e.transform(b),b=e.change(b)):b=void 0;p.classList.remove("action-sheet-active");p.classList.remove("show-tray");a();b&&b()}function h(a,b){var c=function(c){c.preventDefault();
m(a,b)};b.addEventListener("click",c);r.push({trigger:b,evnt:c})}var l,g,w,p,r=[],z,v=c.setHeight(),t=c.get(),q=b();return{init:function(a){d=document.querySelector(".bc-overlay-legacy");null===d&&(d=document.createElement("div"),d.className="bc-overlay-legacy",document.body.appendChild(d));var b={},e=document.getElementById("bc-outside-container");l=[];l=a.querySelectorAll(".bc-trigger-actionsheet");for(g=0;g<l.length;g++)l[g].getAttribute("data-trigger")&&(a=t(l[g]),v(a),h(a,l[g]),b[a.id]===u&&
(e.appendChild(a),b[a.id]=a));z=c.resize(l);d.addEventListener("click",k);n.addEventListener("resize",z)},remove:function(){r.forEach(function(a){a.trigger.removeEventListener("click",a.evnt)});d.removeEventListener("click",k);n.removeEventListener("resize",z)},toggle:m}}});g.when("actionsheet").execute(function(c){document.getElementsByClassName("bc-trigger-actionsheet")&&c.init(document)});"use strict";g.register("button",function(){function c(b){if(!e(b))throw"Not a button";b.classList.remove("bc-button-disabled");
b=b.querySelector(".bc-button-text")||b;"BUTTON"===b.nodeName?b.disabled=!1:b.setAttribute("aria-disabled","false")}function b(b){if(!e(b))throw"Not a button";b.classList.add("bc-button-disabled");b=b.querySelector(".bc-button-text")||b;"BUTTON"===b.nodeName?b.disabled=!0:b.setAttribute("aria-disabled","true")}function e(b){return b&&0<=b.nodeType&&(b.classList.contains("bc-button")||b.classList.contains("bc-icon-button-tap-target"))}return{instance:function(d){if(!e(d))throw"Not a button";this.enable=
function(){c(d)};this.disable=function(){b(d)}},enable:c,disable:b,isButton:e,isButtonDisabled:function(b){return e(b)&&b.classList.contains("bc-button-disabled")}}});"use strict";(function(c){c.register("buttonGroupInit",function(){var b=[],c=function(a){this.element=a;this.children=a.querySelectorAll(".bc-button, .bc-button-group-box");this.length=this.children.length;this.activeElement=a.querySelector(".bc-button-selected,.bc-box-selected")};c.prototype.active=function(a){return function(b){var c;
b="undefined"===typeof b.target?b:this;var d=["bc-button-selected","bc-box-selected"];if(a.activeElement&&a.activeElement!==b){var e;(e=a.activeElement.classList).remove.apply(e,d);a.activeElement.setAttribute("aria-checked",!1)}(c=b.classList).add.apply(c,d);b.setAttribute("aria-checked",!0);a.activeElement=b}};c.prototype.addEvent=function(){this.scopedActive=this.active(this);this.scopedKeyPress=d(this);for(var a=0;a<this.length;a++)this.children[a].addEventListener("click",this.scopedActive),
this.children[a].addEventListener("keydown",this.scopedKeyPress)};c.prototype.removeEvent=function(){for(var a=0;a<this.length;a++)this.children[a].removeEventListener("click",this.scopedActive),this.children[a].removeEventListener("keydown",this.scopedKeyPress)};var d=function(a){return function(b){var c=a.active(a);32===b.keyCode&&(b.preventDefault(),c(this))}};return{init:function(a){a=a.getElementsByClassName("bc-button-group");var d=a.length;if(0<b.length){if(0<b.length)for(var m=0;m<b.length;m++)b[m].removeEvent();
else console.error("no elements to attach to.");b=[]}for(m=0;m<d;m++){var k=new c(a[m]);b.push(k)}if(0<b.length)for(a=0;a<b.length;a++)b[a].addEvent();else console.error("no elements to attach to.")}}});c.when("buttonGroupInit","ready").execute(function(b){0<document.getElementsByClassName("bc-button-group").length&&b.init(document)})})(g);"use strict";g.register("image",function(){return{update:function(c,b,e,d){d&&e?(c.onload=c.onerror=function(){c.onload=null;c.onerror=function(){c.src=b};c.src=
e},c.src=b):e&&!d?(c.onerror=function(){c.onerror=null;c.src=b},c.src=e):c.src=b}}});"use strict";g.when("live","ready").execute(function(c){c("click",".bc-core-inline-alert-close",function(b){for(b=b.target;null!==b;){if(b.hasAttribute("role")){var c=b.getAttribute("role");if("alertdialog"===c||"dialog"===c){b.classList.add("bc-hidden");break}}b=b.parentNode}})});"use strict";(function(){var c=!1;document.body.addEventListener("keydown",function(b){c=!1});document.body.addEventListener("mousedown",
function(b){c=!0});document.body.addEventListener("focusin",function(b){c&&b.target&&b.target.classList.add("bc-focus-mouse")});document.body.addEventListener("focusout",function(b){b.target&&b.target.classList.remove("bc-focus-mouse")})})();"use strict";D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"===typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};g.when("aud-ajax").register("aud-reviews",
function(c){var b=function(a,b,d){c({method:"POST",url:"/set-rating",body:"asin\x3d"+encodeURIComponent(a.asin)+"\x26rating\x3d"+encodeURIComponent(a.rating)+"\x26ratingType\x3d"+encodeURIComponent(a.ratingType)+"\x26appAction\x3d"+encodeURIComponent(a.appAction)+"\x26appActionToken\x3d"+encodeURIComponent(a.appActionToken)},function(c,e,l){200===c?"function"===typeof b&&b(a):"function"===typeof d&&d(a,l)})},e=function(a,b){for(var c=[],d=0;d<a.classList.length;d+=1)a.classList[d]!==b&&c.push(a.classList[d]);
a.className=c.join(" ")},d=function(a,b,c,d){d&&a.getElementsByTagName("input")[0].setAttribute("data-rating",b);a=a.getElementsByTagName("i");d="left"===c?0:5;for(var h=0;5>h;h+=1)"left"===c?d+1<=b?(e(a[h],"bc-icon-star-hollow"),e(a[h],"bc-icon-star-half-left"),e(a[h],"bc-icon-star-half-right"),a[h].classList.add("bc-icon-star"),d+=1):d+.5<=b?(e(a[h],"bc-icon-star"),e(a[h],"bc-icon-star-hollow"),e(a[h],"bc-icon-star-half-right"),a[h].classList.add("bc-icon-star-half-left"),d+=.5):(e(a[h],"bc-icon-star"),
e(a[h],"bc-icon-star-half-left"),e(a[h],"bc-icon-star-half-right"),a[h].classList.add("bc-icon-star-hollow")):"right"===c&&(d-1>=b?(e(a[h],"bc-icon-star"),e(a[h],"bc-icon-star-half-left"),e(a[h],"bc-icon-star-half-right"),a[h].classList.add("bc-icon-star-hollow"),--d):d-.5>=b?(e(a[h],"bc-icon-star"),e(a[h],"bc-icon-star-hollow"),e(a[h],"bc-icon-star-half-right"),a[h].classList.add("bc-icon-star-half-right"),d-=.5):(e(a[h],"bc-icon-star-hollow"),e(a[h],"bc-icon-star-half-left"),e(a[h],"bc-icon-star-half-right"),
a[h].classList.add("bc-icon-star")))};return{init:function(a,c,e,k,h){a="string"===typeof a?document.getElementsByClassName(a):Array.isArray(a)?a:[a];var l=!1;"function"===typeof e&&(l=e);for(e=0;e<a.length;e+=1){var g=a[e].getElementsByTagName("i"),w=a[e].getElementsByTagName("input")[0],p,r,n,v,t,q;"object"===("undefined"===typeof c?"undefined":D(c))?(p=c.asin,r=c.rating,n=c.ratingType,v=c.direction,t=c.appAction,q=c.appActionToken,w=a[e].getElementsByTagName("input")[0],w.setAttribute("data-rating",
r)):(p=w.getAttribute("data-asin"),r=parseFloat(w.getAttribute("data-rating"),10),n=w.getAttribute("data-rating-type"),v=w.getAttribute("data-direction"),t=w.getAttribute("data-app-action"),q=w.getAttribute("data-app-action-token"));d(a[e],r,v,!1);for(w=0;w<g.length;w+=1)r="left"===v?w+1:5-w,g[w].onmouseover=function(a,b,c){return function(){d(a,b,c,!1)}}(a[e],r,v),g[w].onmouseout=function(a,b){return function(){var c=a.getElementsByTagName("input")[0];d(a,parseFloat(c.getAttribute("data-rating"),
10),b,!1)}}(a[e],v),g[w].onclick=function(a,c,e,f,m,J){var H=a.getElementsByTagName("input")[0];return l?function(){var b=parseFloat(H.getAttribute("data-rating"),10);H.setAttribute("data-rating",e);l({asin:c,rating:e,ratingType:f,appAction:m,appActionToken:J})||d(a,b,v,!0)}:function(){var l=parseFloat(H.getAttribute("data-rating"),10);H.setAttribute("data-rating",e);b({asin:c,rating:e,ratingType:f,appAction:m,appActionToken:J},function(a){"function"===typeof k&&k(a)},function(b){d(a,l,v,!0);"function"===
typeof h&&h(b)})}}(a[e],p,r,n,t,q)}},rate:b,setRating:d}});"use strict";g.when("ready","desktop").register("tooltipInit",function(){function c(b){var c=b.querySelector(".bc-tooltip");if(c){var a=c.classList.contains("bc-tooltip-top")||c.classList.contains("bc-tooltip-bottom");return function(){var f=(new Date).valueOf();""===c.id?(b.firstElementChild.setAttribute("aria-describedby","tooltip"+f),c.id="tooltip"+f):b.firstElementChild.setAttribute("aria-describedby",c.id);c.classList.remove("bc-hidden");
a?c.style.left=(b.offsetWidth-c.offsetWidth)/2+"px":c.style.top=(b.offsetHeight-c.offsetHeight)/2+"px"}}return null}function b(b){var c=b.querySelector(".bc-tooltip");return c?function(){c.classList.add("bc-hidden")}:null}return function(e,d,a){e=a?e.getElementsByClassName(d):e.querySelectorAll(d);for(d=0;d<e.length;d++)a=e[d],a.addEventListener("mouseover",c(a)),a.addEventListener("mouseout",b(a)),a.addEventListener("focus",c(a),!0),a.addEventListener("blur",b(a),!0)}});g.when("tooltipInit").execute(function(c){c(document,
".bc-trigger-tooltip")});"use strict";(function(c){c.register("accordionInit",function(){function b(a,b){b.classList.remove("bc-accordion-active");a.setAttribute("aria-expanded","false")}function c(a){return function(c){c.preventDefault();c=a.parentElement;if(c.classList.contains("bc-accordion-exclusive"))for(var d=0;d<c.children.length;d++)a!==c.children[d]&&b(this,c.children[d]);a.classList.contains("bc-accordion-active")?b(this,a):(a.classList.add("bc-accordion-active"),this.setAttribute("aria-expanded",
"true"))}}function d(a){var b=c(a);return function(a){32===a.keyCode&&(a.preventDefault(),b())}}return function(a){a=a.querySelectorAll(".bc-accordion-row");for(var b=0;b<a.length;b++){var m=a[b].querySelector(".bc-accordion-header");m.addEventListener("click",c(a[b]));m.addEventListener("keydown",d(a[b]))}}});c.when("accordionInit","ready").execute(function(b){b(document)})})(g);"use strict";g.when("accessibleClick").register("expanders",function(c){function b(a){var b=a.classList.contains("bc-expander-collapsed");
a.classList.add(b?"bc-expander-expanded":"bc-expander-collapsed");a.classList.remove(b?"bc-expander-collapsed":"bc-expander-expanded");d(a)}function e(a){Array.prototype.forEach.call(a.querySelectorAll(".bc-expander:not(.bc-expander-initialized)"),function(a){d(a);a.classList.add("bc-expander-initialized")})}function d(a){if(a.classList.contains("bc-expander-type-partial-collapse")){var b=a.classList.contains("bc-expander-collapsed"),c=a.querySelector(".bc-expander-content");b?(a=a.dataset.bcExpanderCollapsedHeight,
a!==u&&null!==a&&""!==a&&(c.style.maxHeight=a+(isNaN(a)?"":"px"))):c.style.maxHeight=""}}c.live(".bc-expander-toggle",function(a){var c=a.target&&a.target.closest(".bc-expander");if(!c)throw Error("Invalid expander toggle link: missing expander parent!",a);b(c)});g.when("ready").execute(e.bind(null,document));return{toggle:b,init:e}});"use strict";q=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,
a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.register("Overlay",function(){var c=function(){function b(c){var d=1<arguments.length&&arguments[1]!==u?arguments[1]:"default";t(this,b);this._container=c;this._overlayType=d;n.getComputedStyle&&"static"===n.getComputedStyle(c).position&&(c.style.position="relative");this._container.classList.add("bc-overlay-type-"+d);this._overlay=document.createElement("div");this._overlay.classList.add("bc-overlay");this._container.appendChild(this._overlay);
this._content=document.createElement("div");this._content.classList.add("bc-overlay-content");this._overlay.appendChild(this._content);for(var d=arguments.length,a=Array(2<d?d-2:0),f=2;f<d;f++)a[f-2]=arguments[f];this.setContent.apply(this,a)}q(b,null,[{key:"create",value:function(c,d,a){return new b(c,d,a)}}]);q(b,[{key:"setContent",value:function(){this._content.innerHTML="";for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];null!=c&&c.filter(function(a){return null!=a}).map(function(a){return"string"===
typeof a?document.createTextNode(a):a}).forEach(this._content.appendChild.bind(this._content))}},{key:"remove",value:function(){this.stop();this._container.removeChild(this._overlay)}}]);return b}();c.DISPLAY_TYPE_DEFAULT="default";c.DISPLAY_TYPE_TRANSPARENT="transparent";return c});"use strict";(function(c){c.when("ready").register("triggerFinder",function(){return function(b,c,d){if(b=b.querySelectorAll(c))for(c=0;c<b.length;c++)if(b[c].getAttribute("data-trigger")){var a=b[c].querySelector("#"+
b[c].getAttribute("data-trigger"));a?d(a):console.error("data trigger object not found.")}else console.error("trigger found not data-trigger set")}});c.when("ready").register("Player",function(){var b=null;return b=new function(){var b=null,c=null,a=function(){var a=-1;"Microsoft Internet Explorer"===navigator.appName&&null!==/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return-1<a&&9>a?!0:!1}(),f=function(a){a=a?document.createElement("bgsound"):document.createElement("AUDIO");
a.id="webPlayer";return document.body.appendChild(a)}(a);return{load:function(b){f.setAttribute("type","audio/mpeg");f.setAttribute("src",b);a||f.play()},play:function(){f.play()},pause:function(){a?f.src="":f.pause()},getSRC:function(){return f.src},getTimeLeft:function(){return f.duration-f.currentTime},buffer:function(a){f.setAttribute("type","audio/mpeg");f.setAttribute("autoplay",!1);f.setAttribute("src",a)},getLength:function(){return f.duration},getCurrentPosition:function(){return f.currentTime},
instance:function(){return f},isPlaying:function(){return!f.paused},onEnd:function(a){return f.addEventListener("ended",a,!1)},reset:function(){var a=f,b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);f=b},trigger:{set:function(a){b=a},get:function(){return b}},resetUI:{set:function(a){c=a},get:function(){return c}}}}});c.when("Player").register("initPlayer",function(b){function c(d,e){function l(){var c=b.trigger.get(),l=b.instance(),r=m();if(c&&c===d)b.isPlaying()?(e(d,"pause"),b.pause()):(e(d,
"play"),b.play());else{if(c){if(c.classList.contains("bc-audio-button-has-countdown")){var n=c.querySelector(".bc-audio-button-text"),v=n.querySelector(".bc-audio-button-countdown-text");n.classList.add("bc-hidden");v.innerHTML="";l.removeEventListener("timeupdate",a,!1)}l.removeEventListener("ended",r,!1);l.removeEventListener("canplay",f,!1);e(c,"pause")}b.trigger.set(d);b.load(g);e(d,"load");l.addEventListener("ended",r,!1);l.addEventListener("canplay",f,!1)}}a=function(){var a=b.trigger.get(),
c=isNaN(b.getTimeLeft())?0:b.getTimeLeft(),d;d=Math.floor(c/3600);var e=Math.floor(c%3600/60),c=Math.floor(c%3600%60);d=(0<d?d+":"+(10>e?"0":""):"")+e+":"+(10>c?"0":"")+c;a.querySelector(".bc-audio-button-countdown-text").innerHTML="- "+d};f=function(){var c=b.trigger.get(),d=b.instance();e(c,"play");c.classList.contains("bc-audio-button-has-countdown")&&(c.querySelector(".bc-audio-button-text").classList.remove("bc-hidden"),d.addEventListener("timeupdate",a,!1))};m=function(){return function(){var a=
b.trigger.get();e(a,"pause")}};var g=d.getAttribute("data-mp3");g?d.addEventListener("click",l,!1):console.error("No mp3 definition found")}function d(a,b){var c=a.getElementsByClassName("bc-icon")[0];if(c)switch(b){case "play":c.classList.remove("bc-icon-play");c.classList.add("bc-icon-pause");break;case "pause":c.classList.add("bc-icon-play"),c.classList.remove("bc-icon-pause")}else{var c=a.querySelector(".bc-audio-button-play"),d=a.querySelector(".bc-audio-button-pause"),e=a.querySelector(".bc-audio-button-spinner");
switch(b){case "load":a.disabled=!0;c.classList.add("bc-hidden");d.classList.add("bc-hidden");e.classList.remove("bc-hidden");break;case "play":a.disabled=!1;c.classList.add("bc-hidden");e.classList.add("bc-hidden");d.classList.remove("bc-hidden");break;case "pause":a.disabled=!1,d.classList.add("bc-hidden"),e.classList.add("bc-hidden"),c.classList.remove("bc-hidden")}}}var a,f,m;return function(a){c(a,d)}});c.when("Player","aud-ajax").register("initPlayerButton",function(b,c){function d(a,d){function k(){var a=
{asin:v,token:q,contentSource:u,lengthOfSample:A,position:"0",samplePlayListeningEventStartTime:Date.now(),eventStartPosition:"0",eventType:"StartListening"};n("/api/set-stat?"+g(a))}function h(){var a={asin:v,token:q,contentSource:u,lengthOfSample:A,position:Math.floor(1E3*b.getCurrentPosition()),samplePlayListeningEventStartTime:E,eventStartPosition:B,eventType:"Listening"};n("/api/set-stat?"+g(a))}function l(){var a=b.trigger.get();if(!isNaN(b.getTimeLeft())&&(a=a.querySelector(".bc-button-audio-countdown-text"))){var c=
b.getTimeLeft(),d=Math.floor(c/3600),e=Math.floor(c%3600/60),c=Math.floor(c%3600%60);a.innerHTML=(0<d?d+":"+(10>e?"0":""):"")+e+":"+(10>c?"0":"")+c}}function g(a){var b=[];Object.keys(a).forEach(function(c){var d=a[c];Array.isArray(d)?d.forEach(function(a){b.push(c+"\x3d"+encodeURIComponent(a))}):b.push(c+"\x3d"+encodeURIComponent(d))});return b.join("\x26")}function n(a){a&&c({url:a,method:"POST"},function(){})}function p(){var a=b.trigger.get(),c=b.instance();d(a,"play");c.addEventListener("timeupdate",
l,!1);A=Math.floor(1E3*b.getLength());k();c.addEventListener("ended",function(){d(a,"reset");var b={asin:v,token:q,contentSource:u,lengthOfSample:A,samplePlayListeningEventStartTime:Date.now(),eventType:"MarkAsFinished"};n("/api/set-stat?"+g(b))},!1)}function r(c){var e=b.trigger.get();c.preventDefault?c.preventDefault():c.returnValue=!1;e&&e===a?b.isPlaying()?(d(a,"pause"),b.pause(),h()):(d(a,"play"),b.play(),B=Math.floor(1E3*b.getCurrentPosition()),E=Date.now()):(e&&(c=b.resetUI.get())&&c(),b.trigger.set(a),
b.resetUI.set(function(){d(b.trigger.get(),"reset");b.reset()}),b.load(G),d(a,"load"),b.instance().addEventListener("canplay",p,!1))}var t=a.querySelector("button"),v=t.getAttribute("sample-asin"),q=t.getAttribute("sample-ajax-token"),u=t.getAttribute("sample-content-source"),A=0,B=0,E=Date.now(),G=t.getAttribute("data-mp3");G?a.addEventListener("click",r,!1):console.error("No mp3 definition found")}function a(a,b){var c=a.querySelector(".bc-button-player-icon-pause"),d=a.querySelector(".bc-button-player-icon-play"),
e=a.querySelector(".bc-button-player-label-play"),g=a.querySelector(".bc-button-player-image"),n=a.querySelector(".bc-button-audio-countdown-text");switch(b){case "load":a.disabled=!0;c.classList.add("bc-hidden");d.classList.add("bc-hidden");e.classList.add("bc-hidden");g.classList.remove("bc-hidden");break;case "pause":a.disabled=!1;c.classList.add("bc-hidden");d.classList.remove("bc-hidden");e.classList.add("bc-hidden");g.classList.add("bc-hidden");break;case "play":a.disabled=!1;c.classList.remove("bc-hidden");
d.classList.add("bc-hidden");e.classList.add("bc-hidden");g.classList.add("bc-hidden");break;case "reset":a.disabled=!1,c.classList.add("bc-hidden"),d.classList.remove("bc-hidden"),e.classList.remove("bc-hidden"),n.innerHTML="",g.classList.add("bc-hidden")}}return{init:function(b){d(b,a)},template:a,play:function(c){if("undefined"==c)throw"No element was defined";var d=c.querySelector("button").getAttribute("data-mp3");d&&(b.load(d),a(c,"play"))},pause:function(){b.trigger.get()&&(b.pause(),a(element,
"pause"))}}});c.when("triggerFinder","initPlayer","initPlayerButton","ready").register("initAllPlayers",function(b,c,d){b(document,".bc-trigger-player",c);b(document,".bc-trigger-playerbutton",d.init)})})(g);"use strict";g.when("ready").register("progressBar",function(){return{setActive:function(c,b){c.setAttribute("aria-valuenow",b);c=c.querySelectorAll(".bc-progress-segment");b--;for(var e=0;e<c.length;e++)e<b?(c[e].classList.remove("bc-segment-active"),c[e].classList.add("bc-segment-complete")):
(e==b?c[e].classList.add("bc-segment-active"):c[e].classList.remove("bc-segment-active"),c[e].classList.remove("bc-segment-complete"))}}});"use strict";q=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("debounce","boxUtility","live","StrictEvents","desktop").register("popover",function(c,b,e,d){function a(){var a=
b.getViewportBox();return 10<=Math.sqrt(Math.pow(B-a.top,2)+Math.pow(E-a.left,2))}function f(a){if(a){var b=a.getAttribute("data-trigger");if(b&&(b=I[b]||m(document.getElementById(b))))return b._setTriggerElement(a),b}}function m(a){if(a){var b=I[a.id];return b?b:new K(a)}}var k={up:["up","down","left","right"],down:["down","up","left","right"],left:["left","right","up","down"],right:["right","left","down","up"]},h={horizontal:{orthoAxis:"vertical",size:"width",offsetSize:"offsetWidth",clientSize:"clientWidth",
position:"left"},vertical:{orthoAxis:"horizontal",size:"height",offsetSize:"offsetHeight",clientSize:"clientHeight",position:"top"}},l={up:{axis:"vertical",isBefore:!0,popoverClass:"bc-popover-top"},down:{axis:"vertical",isBefore:!1,popoverClass:"bc-popover-bottom"},left:{axis:"horizontal",isBefore:!0,popoverClass:"bc-popover-left"},right:{axis:"horizontal",isBefore:!1,popoverClass:"bc-popover-right"}},g={top:"up",bottom:"down"},w={horizontal:{width:16,height:16},vertical:{width:16,height:16}},p=
document.querySelector(".adbl-page"),r=document.createElement("div");r.classList.add("bc-popover-container");document.body.appendChild(r);var z=null,v=null,I={},K=function(a){function c(a){t(this,c);var b=x(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,["show","hide","hideNow"]));b.element=a;b.triggerElement=a.closest(".bc-trigger");b.currentTrigger=null;b.id=a.id;I[b.id]=b;b.isHidden=!0;b._isAbsolute=!!b.element.getAttribute("data-bodylevel");b._isAbsolute&&r.appendChild(b.element);b._showTimeout=
null;b._lastShownAt=0;b.__isTouchModeEnabled=null;b._touchModeTimeout=null;b._preventDefaultOnClick=null;a=parseFloat(b.element.getAttribute("data-width"));isNaN(a)||(b._fixedWidth=a,b.element.style.width=b._fixedWidth+"px");b._isHoverable=b.element.classList.contains("bc-hoverable");a=b.element.getAttribute("data-popover-position");a in g&&(a=g[a]);b._directions=k[a||"down"];b._direction=null;b._directionProps=null;return b}y(c,a);q(c,[{key:"_setTriggerElement",value:function(a){this.currentTrigger=
a}},{key:"handleEvent",value:function(a){var b=1<arguments.length&&arguments[1]!==u?arguments[1]:!1;if("touchstart"===a.type||"touchend"===a.type)this._enableTouchMode();else if("click"===a.type&&this._preventDefaultOnClick&&a.preventDefault(),this._isTouchModeEnabled())return;a&&(b?this._handleDocumentEvent(a):this._handlePopoverEvent(a))}},{key:"_handleDocumentEvent",value:function(a){a.target.closest(".bc-popover, .bc-trigger-popover")||"mouseup"!==a.type&&"touchend"!==a.type||this.hideNow()}},
{key:"_handlePopoverEvent",value:function(a){var b=this;if(a.target===this.element||!this.triggerElement||a.target===this.triggerElement)switch(a.type){case "mouseover":this.show();break;case "mouseout":this.hide();break;case "click":this.toggle();break;case "touchend":this.isHidden?(this.show(),this._preventDefaultOnClick=!0,setTimeout(function(){return b._preventDefaultOnClick=!1},100)):this.hideNow()}}},{key:"show",value:function(a){var b=!1;this.emit("show",Object.assign({cancelShow:function(){return b=
!0}},a));if(!b&&(c._cancelHide(),this.isHidden)){z&&z.hideNow();this.isHidden=!1;a=this.element.style.visibility;this.element.style.visibility="hidden";this.element.classList.remove("bc-hidden");if(this.currentTrigger){this._setPosition();var d=this.currentTrigger.querySelector("a");d&&d.setAttribute("aria-expanded","true")}this.element.style.visibility=a;z=this;this._lastShownAt=+new Date}}},{key:"hideNow",value:function(a){var b=!1;this.emit("hide",Object.assign({cancelHide:function(){return b=
!0}},a));b||(c._cancelHide(),this.isHidden||(this.isHidden=!0,this.element.classList.add("bc-hidden"),this.currentTrigger&&(a=this.currentTrigger.querySelector("a"))&&a.setAttribute("aria-expanded","false"),this._disableTouchMode(),z===this&&(z=null)))}},{key:"hide",value:function(a){this.isHidden||c.hide(this,a)}},{key:"toggle",value:function(){this.isHidden?this.show():200<new Date-this._lastShownAt&&this.hideNow()}},{key:"_enableTouchMode",value:function(){this._clearTouchModeTimeout();this.__isTouchModeEnabled=
!0}},{key:"_disableTouchMode",value:function(){var a=this;this._clearTouchModeTimeout();this._touchModeTimeout=setTimeout(function(){a.__isTouchModeEnabled=!1},500)}},{key:"_clearTouchModeTimeout",value:function(){null!==this._touchModeTimeout&&clearTimeout(this._touchModeTimeout)}},{key:"_isTouchModeEnabled",value:function(){return this.__isTouchModeEnabled}},{key:"_setPosition",value:function(){if(this.currentTrigger){this.element.style.width="";this.element.style.height="";var a=b.getBox(this.currentTrigger),
c=b.getAbsoluteOffset(this.currentTrigger),d=b.getViewportBox();if(c.left>d.left+d.width||c.top>d.top+d.height||c.left+a.width<d.left||c.top+a.height<d.top)this.hideNow();else{this._direction&&this.element.classList.remove(this._directionProps.popoverClass);var d=this._getPopoverBox(),e=this._getContainer(),f=e&&b.getBox(e),e=e&&b.getAbsoluteOffset(e),f=this._getOrientation(a,c,d,f,e),k=f.getDirection(),f=f.getPosition(),m=l[k],g=h[m.axis],e=h[g.orthoAxis];this._direction=k;this._directionProps=m;
this.element.classList.add(m.popoverClass);k=this.element.querySelector(".bc-popover-beak");k.style[g.position]="";k.style[e.position]="";var B=w[m.axis];d[g.size]+=B[g.size];m.isBefore&&(f[g.position]-=B[g.size]);m=B[e.size];a=c[e.position]+a[e.size]/2-f[e.position];c=d[e.size];a<m?a=m:a>c-m&&(a=c-m);k.style[e.position]=a+"px";a=f.left;c=f.top;this._isAbsolute||(f=b.getAbsoluteOffset(this.element.offsetParent),a-=f.left,c-=f.top);this.element.style.width=d.width+"px";this.element.style.height=d.height+
"px";this.element.style.left=a+"px";this.element.style.top=c+"px"}}}},{key:"_getOrientation",value:function(a,b,c,d,e){var f=null,k=[];this._directions.every(function(h){h=new A(h,a,b,c,d,e);k.push(h);return h.doesFit()&&!h.wasOffsetToFit()?(f=h,!1):!0});f||k.forEach(function(a){if(null===f||!a.doesFit()&&!f.doesFit()&&a.getVisibleArea()>f.getVisibleArea()||a.doesFit()&&!f.doesFit()||a.doesFit()&&Math.abs(a.getOffsetToFit())<Math.abs(a.getOffsetToFit()))f=a});return f}},{key:"_getPopoverBox",value:function(){var a=
this.element.style.visibility,c=this.element.style.display;this.element.style.visibility="hidden";this.element.style.display="block";var d={};if(this._fixedWidth)d.width=this._fixedWidth,this.element.style.width=d.width+"px",d.height=b.getBox(this.element).height;else{d=this.element.querySelector(".bc-popover-inner");if(!d)return;this.element.style.width="2000px";var e=d.style.float;d.style["float"]="left";this.element.style.width=b.getBox(d).width+"px";d.style.float=e;d=b.getBox(this.element)}this.element.style.visibility=
a;this.element.style.display=c;return d}},{key:"_getContainer",value:function(){if(this.element)return this.element.closest(".bc-container")||null}}],[{key:"hide",value:function(a,b){v=setTimeout(function(){v=null;a.hideNow(b)},a._isHoverable?500:0)}},{key:"_cancelHide",value:function(){null!==v&&(clearTimeout(v),v=null)}}]);return c}(d),A=function(){function a(c,d,e,f,k,m){t(this,a);this._direction=c;this._directionProps=l[c];this._axisProps=h[this._directionProps.axis];this._orthoAxisProps=h[this._axisProps.orthoAxis];
this._triggerBox=d;this._triggerPosition=e;this._popoverBox=f;this._containerBox=k;this._containerPosition=m;this._viewportBox=b.getViewportBox();this._doesFit=!0;this._idealPosition=this._getIdealPosition();c=this._getFittedPosition();this._fittedPosition=c.fittedPosition;this._offsetToFit=c.offsetToFit}q(a,[{key:"getDirection",value:function(){return this._direction}},{key:"doesFit",value:function(){return this._doesFit}},{key:"wasOffsetToFit",value:function(){return 0<this._offsetToFit}},{key:"getPosition",
value:function(){return this._fittedPosition||this._idealPosition}},{key:"getOffsetToFit",value:function(){return this._offsetToFit}},{key:"_getIdealPosition",value:function(){var a,b=this._triggerPosition[this._axisProps.position],b=this._directionProps.isBefore?b-this._popoverBox[this._axisProps.size]:b+this._triggerBox[this._axisProps.size],c=null;"vertical"===this._directionProps.axis&&this._containerBox&&this._popoverBox[this._orthoAxisProps.size]>.75*this._containerBox[this._orthoAxisProps.size]&&
(c=this._containerPosition[this._orthoAxisProps.position]+this._containerBox[this._orthoAxisProps.size]/2);null===c&&(c=this._triggerPosition[this._orthoAxisProps.position]+this._triggerBox[this._orthoAxisProps.size]/2);c-=this._popoverBox[this._orthoAxisProps.size]/2;return a={},F(a,this._axisProps.position,b),F(a,this._orthoAxisProps.position,c),a}},{key:"_getFittedPosition",value:function(){var a,b=this._getFittedCoordinate(this._axisProps),c=this._getFittedCoordinate(this._orthoAxisProps),d=c-
this._idealPosition[this._orthoAxisProps.position];if(b!==this._idealPosition[this._axisProps.position]||Math.abs(d)>.4*this._popoverBox[this._orthoAxisProps.size])this._doesFit=!1;return{fittedPosition:(a={},F(a,this._axisProps.position,this._idealPosition[this._axisProps.position]),F(a,this._orthoAxisProps.position,c),a),offsetToFit:d}}},{key:"_getFittedCoordinate",value:function(a){var b=this._idealPosition[a.position],c=b+this._popoverBox[a.size],b=this._getFittedCoordinateGivenBounds(b,c,this._viewportBox[a.position],
this._viewportBox[a.position]+this._viewportBox[a.size]),c=b+this._popoverBox[a.size];return this._getFittedCoordinateGivenBounds(b,c,0,p[a.clientSize])}},{key:"_getFittedCoordinateGivenBounds",value:function(a,b,c,d){var e=a;b-=d;0<b&&(e-=b);a=c-a;0<a&&(e+=a);return e}},{key:"getVisibleArea",value:function(){var a=this._fittedPosition||this._idealPosition;return(Math.min(a.left+this._popoverBox.width,this._viewportBox.left+this._viewportBox.width)-Math.max(a.left,this._viewportBox.left))*(Math.min(a.top+
this._popoverBox.height,this._viewportBox.top+this._viewportBox.height)-Math.max(a.top,this._viewportBox.top))}}]);return a}(),B=void 0,E=void 0;document.addEventListener("touchstart",function(a){a=b.getViewportBox();B=a.top;E=a.left});["mouseup","touchend"].forEach(function(b){return document.addEventListener(b,function(b){!z||"touchend"===b.type&&a()||z.handleEvent(b,!0)})});n.addEventListener("scroll",c(function(){z&&z._setPosition()}));["click","touchstart","touchend"].forEach(function(b){e(b,
".bc-trigger-popover",function(b){if("touchend"!==b.type||!a()){var c=f(this);c&&c.handleEvent(b)}})});["mouseover","mouseout"].forEach(function(a){e(a,".bc-trigger-popover, .bc-popover.bc-hoverable",function(a){var b=this&&(f(this)||m(this));b&&b.handleEvent(a)})});(c=(c=document.querySelector(".bc-trigger-popover:hover"))&&f(c))&&c.show();return{getPopoverFromTriggerElement:f,getPopoverFromElement:m}});"use strict";q=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=
a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("Overlay","boxUtility").register("Spinner",function(c,b){return function(c){function d(a,b,c){t(this,d);var e=document.createElement("img");e.classList.add("bc-spinner");e.setAttribute("src","https://m.media-amazon.com/images/G/01/audibleweb/brickcity/1.0/spinner/spinner._V510656778_.png");var h=document.createElement("div");h.classList.add("bc-overlay-text");
null!=c&&(h.innerHTML=c);a=x(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b,e,h));a._spinnerImage=e;a.stop();return a}y(d,c);q(d,null,[{key:"create",value:function(a,b,c){return new d(a,b,c)}}]);q(d,[{key:"start",value:function(){this._overlay.classList.remove("bc-hidden");this._autoSize()}},{key:"stop",value:function(){this._overlay.classList.add("bc-hidden")}},{key:"_autoSize",value:function(){var a=b.getBox(this._overlay);this._spinnerImage.style.width=this._spinnerImage.style.height=
Math.min(60,a.width,a.height)+"px"}}]);return d}(c)});"use strict";g.when("ready").execute(function(){function c(a){var b=void 0,c=void 0,d;for(d=a.target;d;){if(d.classList&&d.classList.contains("bc-tabs")){b=d;break}d=d.parentNode}d=b.querySelectorAll(".bc-tab-heading");for(var b=b.querySelectorAll(".bc-tab-content"),e=0;e<d.length;e++)d[e].classList.remove("bc-tab-active"),d[e].classList.add("bc-color-secondary"),d[e].setAttribute("aria-selected","false"),d[e].classList.contains("bc-tab-lens")?
(d[e].classList.remove("bc-color-active"),d[e].classList.remove("bc-size-headline1"),d[e].classList.add("bc-size-title1")):(d[e].classList.remove("bc-color-base"),d[e].querySelector(".bc-tab-bar").classList.remove("bc-tab-heading-active")),d[e]===a.currentTarget&&(c=e,d[e].classList.add("bc-tab-active"),d[e].classList.remove("bc-color-secondary"),d[e].setAttribute("aria-selected","true"),d[e].classList.contains("bc-tab-lens")?(d[e].classList.add("bc-color-active"),d[e].classList.remove("bc-size-title1"),
d[e].classList.add("bc-size-headline1")):(d[e].classList.add("bc-color-base"),d[e].querySelector(".bc-tab-bar").classList.add("bc-tab-heading-active")));for(a=0;a<b.length;a++)b[a].classList.add("bc-hidden"),a===c&&b[a].classList.remove("bc-hidden")}for(var b=function(){return function(a){32===a.keyCode&&(c(a),a.preventDefault())}},e=document.querySelectorAll(".bc-tab-heading"),d=0;d<e.length;d++)e[d].addEventListener("click",c),e[d].addEventListener("keydown",b())});"use strict";g.when("live","trayHelper",
"transitionEvent","debounce","focus","ready","mobile").register("tray",function(c,b,e,d,a){function f(){var a=document.getElementsByClassName("bc-action-sheet");[].forEach.call(a,function(a,b){a.classList.contains("show-tray")&&a.classList.remove("show-tray")})}function m(a,b){p?a.addEventListener(p,function L(c){a.removeEventListener(p,L);b()}):setTimeout(b)}function k(){var a=document.getElementsByClassName("adbl-page");return a&&a.length&&a[0]}function h(a,b){m(a,function(){if(a.classList.contains("show-tray")){v=
q.scrollTop;var c=k();c&&(u=c.style.display,c.style.display="none");a.style.position="relative";b&&b()}});r=a;g(a);a.style.visibility="visible";n.getComputedStyle(a).transform;a.classList.add("show-tray")}function l(a,b){m(a,function(){a.classList.contains("show-tray")||(a.style.visibility="hidden",b&&b())});r=null;a.style.position="";a.classList.remove("show-tray");var c=k();c&&(c.style.display=u);q.scrollTop=v}var g=b.setHeight(),t=b.get(),p=e(),r,q=document.scrollingElement||document.documentElement||
document.body,v=null,u=null,x,A=d(function(b,c){b="string"===typeof b?document.getElementById(b):b;(c=c||document.activeElement)||(c=document.activeElement&&document.activeElement.closest(".bc-trigger")||document.activeElement);b===r?(l(b),f(),!x||c.hasAttribute("data-shift-focus")||x.closest(".bc-modal, .bc-tray")||a.change({focusElement:x})()):r?l(r,function(){h(b)}):(h(b),x=c,c.hasAttribute("data-shift-focus")||(c=b.querySelector(a.FOCUSABLE_SELECTOR))&&a.change({focusElement:c,focusContainer:b,
isFocusOnLayer:!0})())});c("click",".bc-trigger-tray",function(){var a=t(this);a&&A(a,this)});n.addEventListener("resize",function(){r&&g(r)});return{init:function(a){var b=document.getElementById("bc-outside-container");a=a.querySelectorAll(".bc-tray");for(var c,d=0;d<a.length;d++)c=a[d],c.style.visibility="hidden",c.parentNode!==b&&b.appendChild(c)},toggle:A,isTray:function(a){return a&&a.classList&&a.classList.contains("bc-tray")},open:function(a){a&&a.classList.contains("show-tray")||A(a)},close:function(a){a&&
a.classList.contains("show-tray")&&A(a)}}});g.when("tray").execute(function(c){document.getElementsByClassName("bc-trigger-tray")&&c.init(document)});"use strict";g.when("ready").register("toastMessage",function(){function c(m,k){function h(){e.classList.add("toast-hide");e.classList.remove("toast-show");k.callback&&k.callback();if(0<b.length){var a=b.pop();n.setTimeout(c.bind(null,a.message,a.options),500)}}m?(d.innerHTML=m,e.classList.add("toast-show"),e.classList.remove("toast-hide"),k&&(k.action?
(a.innerHTML=k.action,f.classList.remove("bc-hidden")):f.classList.add("bc-hidden"),k.actionCallBack&&f.addEventListener("click",k.actionCallBack)),n.setTimeout(h,k.duration||4E3)):console.error("No Message was passed")}var b=[],e=document.createElement("div");e.setAttribute("id","toast");e.setAttribute("class","toast-hide");var d=document.createElement("span");d.setAttribute("class","toast-message");d.setAttribute("role","alert");var a=document.createElement("span");a.setAttribute("class","toast-action-message bc-text bc-size-base");
var f=document.createElement("a");f.setAttribute("class","bc-link toast-action-link");f.appendChild(a);e.appendChild(d);e.appendChild(f);document.body.appendChild(e);return function(a){var d=1<arguments.length&&arguments[1]!==u?arguments[1]:{};e.classList.contains("toast-show")?b.unshift({message:a,options:d}):c(a,d)}});"use strict";g.when("accessibleClick","ready").register("ratingStars",function(c){var b=function(a,b,c){b=b.querySelectorAll(".bc-rating-star");for(var d=b.length,e=0;e<d;e++){var g=
b[e].children[0];e<a?(g.classList.add("bc-icon-star","active"===c?"bc-color-active":"bc-color-progress"),g.classList.remove("bc-icon-star-hollow","bc-color-tertiary","active"===c?"bc-color-progress":"bc-color-active")):(g.classList.remove("bc-icon-star","bc-color-active","bc-color-progress"),g.classList.add("bc-icon-star-hollow","bc-color-tertiary"))}},e=function(a,c){var d=c.querySelector(".star-count"),e;e=new CustomEvent("bc-rating-star-update",{detail:{starCount:a}});a!==c.getAttribute("data-star-count")&&
(c.setAttribute("data-star-count",a),null!==d&&(d.value=a));c.dispatchEvent(e);b(a,c,"progress")},d=function(b){if(b=a(b.target)){for(var c=b.getAttribute("data-index"),d=b.parentElement.querySelectorAll(".bc-rating-star"),h=0;h<d.length;h++){var l=d[h];l.getAttribute("aria-checked")&&l.setAttribute("aria-checked",!1)}b.setAttribute("aria-checked",!0);e(c,b.parentElement)}},a=function m(a){return a.classList.contains("bc-rating-star")?a:a.classList.contains("bc-rating-stars")?u:m(a.parentElement)};
c.live(".bc-rating-star",function(a){d(a)});return{toggleStars:b,setStarCount:e,starClickEvent:d,init:function(a,b){a=(a||document).getElementsByClassName("bc-rating-stars");for(var c=a.length,d=0;d<c;d++)e(a[d].getAttribute("data-star-count"),a[d]),b&&b(a[d])}}});g.when("desktop").execute(function(){g.when("ratingStars","tooltipInit").register("ratingStarsInit",function(c,b){var e=function(a){var b=function(b){b=a.getAttribute("data-index");c.toggleStars(b,a.parentElement,"active");a.parentElement.parentElement.getElementsByClassName("bc-tooltip-message")[0].innerHTML=
a.getAttribute("data-text")},d=function(b){"5"===b.target.getAttribute("data-index")&&(b=a.parentElement.getAttribute("data-star-count"),c.toggleStars(b,a.parentElement,"progress"))};a.removeEventListener("mouseenter",b);a.removeEventListener("focus",b);a.removeEventListener("blur",d);a.addEventListener("mouseenter",b);a.addEventListener("focus",b);a.addEventListener("blur",d)},d=function(a){var b=function(b){b=a.getAttribute("data-star-count");c.toggleStars(b,a,"progress")};a.removeEventListener("mouseleave",
b);a.removeEventListener("blur",b);a.addEventListener("mouseleave",b);a.addEventListener("blur",b)},a=function(a){c.init(a,function(a){for(var b=a.children,c=b.length,f=0;f<c;f++){var g=a;e(b[f]);d(g)}})};a(document);return{setStarCount:c.setStarCount,attachStarEvents:function(c){a(c);b(c,"bc-trigger-tooltip",!0)}}})});g.when("mobile").execute(function(){try{g.when("ratingStars").register("ratingStarsInit",function(c){var b=function(b,a){var c=function(c){c=a.parentElement;var e=c.getElementsByClassName("mobile-rating-star-text")[0],
f=document.createElement("SPAN");f.className="mobile-rating-star-text bc-pub-inline-block";var l=document.createElement("SPAN");l.className="bc-letter-space bc-letter-space-base";var g=document.createElement("SPAN");g.className="bc-text-bold bc-text bc-size-base bc-color-base";g.innerHTML=b.getAttribute("data-text");f.appendChild(l);f.appendChild(g);e&&c.removeChild(e);c.appendChild(f)};b.removeEventListener("touchend",c);b.addEventListener("touchend",c)},e=function(d){c.init(d,function(a){for(var c=
a.children,d=c.length,e=0;e<d;e++)b(c[e],a)})};e(document);return{setStarCount:c.setStarCount,attachStarEvents:e}})}catch(c){}});"use strict";g.register("slider",function(){return function(c){var b,e;if(!c&&0>c.nodeType)return console.error("element is not available in the DOM"),null;b=c.querySelector("[type\x3drange]");e=c.querySelector(".bc-range-progress");if(!b||!e)return console.error("malformed slider element"),null;var d=function(a){e.style.width=a.target.value+"%"};return{init:function(){b.addEventListener("input",
d);b.addEventListener("change",d)},destroy:function(){b.removeEventListener("input",d);b.removeEventListener("change",d)},setValue:function(a){a=parseInt(a);a!==b.value&&(b.value=a,b.dispatchEvent(new Event("change")))},up:function(a){b.value=parseInt(b.value)+a;b.dispatchEvent(new Event("change"))},down:function(a){b.value=parseInt(b.value)-a;b.dispatchEvent(new Event("change"))}}}});g.when("slider","ready").register("initSlider",function(c){return function(b){b=b.querySelectorAll(".bc-range");[].forEach.call(b,
function(b){c(b).init()})}});g.when("initSlider").execute(function(c){c(n.document)});"use strict";g.when("processing","focus","promise","outsideContainer","ready").register("modalElement",function(c,b){return new function(){function e(){var a=r.getAttribute("data-overlayClass");r.classList.contains("show")?(p.classList.add("bc-overlay-visible"),document.body.classList.add("bc-locked"),a&&p.classList.add(a)):(p.classList.remove("bc-overlay-visible"),document.body.classList.remove("bc-locked"),a&&
p.classList.contains(a)&&p.classList.remove(a))}function d(){return r?r.classList.contains("bc-modal-closeable"):!1}function a(){r&&g(r)}function f(){if(!r)throw"no current modal";r.classList.remove("show");e()}function g(a){r!==a&&(q=r,r=a);q&&(q.classList.remove("show"),v.appendChild(q),v=r.parentNode,q=null,y=document.activeElement);r.classList.contains("show")?(r.classList.remove("show"),v.appendChild(r),y&&y.focus()):(y=document.activeElement,r.classList.add("show"),v=r.parentNode,x.appendChild(r));
e()}function k(a){if(a===u)throw"No element was Provided ";if(null===a.getAttribute("data-trigger"))throw"No ID was provided";a=document.getElementById(a.getAttribute("data-trigger"));if(!a)throw"Modal element cannot be found";return a}function h(){var a=document.querySelector("#bc-modal-overlay");return null===a?(a=document.createElement("div"),a.setAttribute("id","bc-modal-overlay"),a.className="bc-overlay-legacy",document.body.appendChild(a)):a}function l(){var a=document.querySelector("#bc-outside-container");
return null===a?(a=document.createElement("div"),a.setAttribute("id","bc-outside-container"),document.body.appendChild(a)):a}function n(a,b,d){b=b||r;d=d||{mode:"no-cors"};var e=new c(b);e.activate();return fetch(a,d).then(function(a){return a.text()}).then(function(a){e.deactivate();b.querySelector(".bc-modal-content-overflow").innerHTML=a})}function t(a){a.querySelector(".bc-modal-content-overflow").addEventListener("scroll",function(){var b=a.querySelector(".bc-modal-header"),c=a.querySelector(".bc-modal-content-overflow");
0<c.scrollTop&&!b.classList.contains("bc-modal-header-shadow")&&b.classList.add("bc-modal-header-shadow");0===c.scrollTop&&b.classList.contains("bc-modal-header-shadow")&&b.classList.remove("bc-modal-header-shadow")})}var p,r=null,q=null,v=null,x=null,y=null;return{init:function(c){p=h();x=l();[].forEach.call(c.getElementsByClassName("bc-trigger-modal"),function(a){var c=k(a);b.trapFocus(c);var e=function(){};if(!a.hasAttribute("data-shift-focus")){var h=c.querySelector(b.FOCUSABLE_SELECTOR);h&&(e=
b.change({focusElement:h,isFocusOnLayer:!0}))}var l=function(){g(c);if(c===r){var a=c.querySelector("[modal-async-content]"),a=a&&a.getAttribute("modal-async-content");Promise.resolve(a&&n(a,c)).then(e)}};a.addEventListener("click",function(a){a.preventDefault();l()},!1);a.addEventListener("keydown",function(a){32===a.keyCode&&(a.preventDefault(),l())},!1);c.addEventListener("click",function(a){a.target.classList.contains("bc-modal-closeable")&&d()&&f()},!1);t(c)});[].forEach.call(c.getElementsByClassName("bc-trigger-toggle-modal"),
function(b){b.addEventListener("click",a,!1)})},modal:function(a){if(1>a.nodeType)throw"Not an element in the Document";h();l();modalToggleInstance=function(){g(a);return this};modalFetch=function(a,b){n(a,b);return this};modalToClose=function(){d()&&f();return this};return{toggle:modalToggleInstance,close:modalToClose,fetch:modalFetch}},toggle:g,closeCurrentModal:f,loadContentModal:n,activeModal:function(){return r},isModal:function(a){return a&&a.classList&&a.classList.contains("bc-modal")},open:function(a){a.classList.contains("show")||
g(a)},close:function(a){a.classList.contains("show")&&g(a)}}}});g.when("modalElement","ready").register("modal",function(c){document.getElementsByClassName("bc-trigger-modal")&&c.init(document);return c});"use strict";q=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("FullScreenInterface").register("FakeFullScreen",
function(c){return function(b){function c(b,a){t(this,c);var f=x(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));f._wrapper=b;f._videoElement=a;f._isOpen=!1;return f}y(c,b);q(c,[{key:"isOpen",value:function(){return this._isOpen}},{key:"open",value:function(){this._isOpen=!0;this._wrapper.classList.add("fullscreen");this.emit("open")}},{key:"close",value:function(){this._isOpen=!1;this._wrapper.classList.remove("fullscreen");this.emit("close")}}]);return c}(c)});"use strict";q=function(){function c(b,
c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("NativeFullScreen","FakeFullScreen").register("FullScreen",function(c,b){return c.isSupported()?c:b});g.when("StrictEvents").register("FullScreenInterface",function(c){function b(){throw Error("Not implemented!");}return function(c){function d(){t(this,d);return x(this,(d.__proto__||
Object.getPrototypeOf(d)).call(this,["open","close"]))}y(d,c);q(d,[{key:"isOpen",value:function(){b()}},{key:"open",value:function(){b()}},{key:"close",value:function(){b()}},{key:"toggle",value:function(){this.isOpen()?this.close():this.open()}}]);return d}(c)});"use strict";q=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&
c(b,d);return b}}();g.when("FullScreenInterface").register("NativeFullScreen",function(c){var b=["fullscreenchange","webkitendfullscreen","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"],e=["requestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],d=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],a=void 0;return function(c){function g(c,d){t(this,g);var e=x(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));
e._wrapper=c;e._videoElement=d;b.forEach(function(b){document.addEventListener(b,function(b){a!==e||e.isOpen()||e.emit("close")},!1)});return e}y(g,c);q(g,null,[{key:"isSupported",value:function(){var a=document.createElement("video");return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||a.webkitRequestFullScreen)&&!b.every(function(b){return!("on"+b in a)})}}]);q(g,[{key:"isOpen",value:function(){return!!(document.fullScreen||
document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}},{key:"open",value:function(){this._requestFullScreen();a=this;this.emit("open")}},{key:"close",value:function(){this._exitFullScreen();a=!1;this.emit("close")}},{key:"_requestFullScreen",value:function(){var a=document.documentElement;e.every(function(b){if(!a[b])return!0;a[b]()})&&this._videoElement.webkitEnterFullscreen()}},{key:"_exitFullScreen",value:function(){d.every(function(a){if(!document[a])return!0;
document[a]()})}}]);return g}(c)});"use strict";q=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("slider","Spinner","Player","FullScreen","StrictEvents").register("Video",function(c,b,e,d,a){return function(a){function g(a){t(this,g);var c=x(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,["play",
"pause","volumeChange","fullscreen.open","fullscreen.close"]));if(!a&&0>a.nodeType)return console.error("element is not available in the DOM"),x(c,null);c.wrapper=a;c.videoEl=a.querySelector("video");c.spinner=new b(c.wrapper);c._played=!1;c.once("play",function(){c._played=!0;c.wrapper.classList.add("bc-video-played")});c._initControls();c._initVideo();c._initFullScreen();c.samplePlayerElement=e.instance();c.samplePlayerElement&&c.samplePlayerElement.addEventListener("play",c.pause.bind(c));return c}
y(g,a);q(g,null,[{key:"secondsToHms",value:function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60);a=Math.floor(a%3600%60);return(0<b?b+":"+(10>c?"0":""):"")+c+":"+(10>a?"0":"")+a}}]);q(g,[{key:"_initControls",value:function(){var a=this;this.playPauseButton=this.wrapper.querySelector(".bc-video-btn-play");this.playPauseIcon=this.playPauseButton.querySelector(".bc-video-icon");this.poster=this.wrapper.querySelector(".bc-video-poster");this.posterButton=this.wrapper.querySelector(".bc-video-poster-button");
this.fullscreenButton=this.wrapper.querySelector(".bc-video-btn-fullscreen");this.fullscreenIcon=this.fullscreenButton.querySelector(".bc-video-icon");this.seekEl=this.wrapper.querySelector(".bc-video-slider");this.seekInput=this.wrapper.querySelector(".bc-video-slider input");this.timeLabel=this.wrapper.querySelector(".bc-video-time");this.volumeEl=this.wrapper.querySelector(".bc-video-volume");this.volumeInput=this.wrapper.querySelector(".bc-video-volume input");this.volumeButton=this.wrapper.querySelector(".bc-video-btn-volume");
this.volumeIcon=this.volumeButton.querySelector(".bc-video-icon");this.videoControls=this.wrapper.querySelector(".bc-video-controls");this.seekSlider=c(this.seekEl);this.seekSlider.init();this.seekSlider.setValue(0);this.volumeSlider=c(this.volumeEl);this.volumeSlider.init();this.volumeSlider.setValue(100);var b=0;["click","touchend"].forEach(function(c){return a.wrapper.addEventListener(c,function(d){var e=+new Date;100<e-b&&(d.target===a.wrapper||d.target===a.videoEl)&&("touchend"===c&&!a._controlsShowing&&
a._isPlaying||a.togglePlayPause(),a.showControls());b=e})});this.volumeButton.addEventListener("click",this.toggleMute.bind(this));this.playPauseButton.addEventListener("click",this.togglePlayPause.bind(this));this.poster&&this.poster.addEventListener("click",this.togglePlayPause.bind(this));this.posterButton&&this.posterButton.addEventListener("click",this.togglePlayPause.bind(this));this.seekInput.addEventListener("input",function(b){a.videoEl.currentTime=b.target.value*a.videoEl.duration/100});
this.volumeInput.addEventListener("input",function(b){b=a.volumeInput.value/100;a.videoEl.muted=!1;a.videoEl.volume=b});document.documentElement.addEventListener("focus",function(b){a.videoControls.contains(b.target)?a.wrapper.classList.add("tab"):a.wrapper.classList.remove("tab")},!0);this.on("play",function(b){a._isPlaying=!0;a.playPauseIcon.classList.remove("bc-icon-play");a.playPauseIcon.classList.add("bc-icon-pause");a.playPauseButton.setAttribute("aria-label","pause")});this.on("pause",function(b){a._isPlaying=
!1;a.playPauseIcon.classList.remove("bc-icon-pause");a.playPauseIcon.classList.add("bc-icon-play");a.playPauseButton.setAttribute("aria-label","play")});this.on("volumeChange",function(b,c){a.volumeIcon.classList.remove(a._currentVolumeButtonClass||"volume-high");b="high";5>c.percentage||c.muted?b="off":32>c.percentage?b="low":65>c.percentage&&(b="medium");a.volumeSlider.setValue(c.muted?0:c.percentage);a._currentVolumeButtonClass="bc-icon-volume-"+b;a.volumeIcon.classList.add(a._currentVolumeButtonClass)});
this._initShowHideControls()}},{key:"_initShowHideControls",value:function(){var a=this,b=!1,c=void 0,d=function(){a._played&&(clearTimeout(c),a.showControls(),f())},e=function(){clearTimeout(c);!b&&a._isPlaying&&a.hideControls()},f=function(){clearTimeout(c);c=setTimeout(e,3E3)};this.wrapper.addEventListener("mousemove",d);this.videoControls.addEventListener("mouseenter",function(){return b=!0});this.videoControls.addEventListener("mouseleave",function(){return b=!1});this.wrapper.addEventListener("mouseleave",
function(){return b=!1});this.on("play",f);this.on("pause",d);this.on("fullscreen.open",f);this.on("fullscreen.close",f)}},{key:"_initVideo",value:function(){var a=this;["play","playing"].forEach(function(b){return a.videoEl.addEventListener(b,function(b){return a.emit.bind(a,"play")})});["pause","ended","waiting"].forEach(function(b){return a.videoEl.addEventListener(b,function(b){return a.emit.bind(a,"pause")})});this.videoEl.addEventListener("volumechange",this._volumeChanged.bind(this));this.videoEl.addEventListener("timeupdate",
function(b){b=a.videoEl.duration;var c=a.videoEl.currentTime,d=isNaN(b-c)?0:b-c;a.timeLabel.innerHTML=g.secondsToHms(d);a.seekSlider.setValue(Math.round(100*c/b))});this.videoEl.addEventListener("progress",function(b){b=a.videoEl.buffered.length;b=0<b?a.videoEl.buffered.end(b-1):0;b!==a.videoEl.duration&&(a.videoEl.currentTime>b?a.spinner.start():a.spinner.stop())})}},{key:"_initFullScreen",value:function(){var a=this,b=this._fullScreen=new d(this.wrapper,this.videoEl);this.fullscreenButton.addEventListener("click",
b.toggle.bind(b),!1);b.on("open",function(b){a.fullscreenIcon.classList.remove("bc-icon-maximize-screen");a.fullscreenIcon.classList.add("bc-icon-minimize-screen");a.fullscreenButton.setAttribute("aria-label","minimize video");a.wrapper.classList.add("fullscreen");document.body.style.overflow="hidden";a.emit("fullscreen.open")});b.on("close",function(b){a.fullscreenIcon.classList.add("bc-icon-maximize-screen");a.fullscreenIcon.classList.remove("bc-icon-minimize-screen");a.fullscreenButton.setAttribute("aria-label",
"maximize video");a.wrapper.classList.remove("fullscreen");document.body.style.overflow="auto";a.emit("fullscreen.close")})}},{key:"_volumeChanged",value:function(){this.emit("volumeChange",{percentage:100*this.videoEl.volume,muted:this.videoEl.muted})}},{key:"showControls",value:function(){this._controlsShowing||(this.wrapper.classList.add("active"),this._controlsShowing=!0)}},{key:"hideControls",value:function(){this._controlsShowing&&(this._controlsShowing=!1,this.wrapper.classList.remove("active"),
this.wrapper.classList.remove("tab"))}},{key:"play",value:function(){this.samplePlayerElement&&this.samplePlayerElement.pause();this.videoEl.play();this.showControls();this.emit("play")}},{key:"pause",value:function(){this.videoEl.pause();this.emit("pause")}},{key:"togglePlayPause",value:function(){this._isPlaying?this.pause():this.play()}},{key:"toggleMute",value:function(){this.videoEl.muted?this.videoEl.muted=!1:this.videoEl.volume?this.videoEl.muted=!0:this.videoEl.volume=1;this._volumeChanged()}}]);
return g}(a)});g.when("Video").execute(function(c){[].forEach.call(document.getElementsByClassName("bc-video"),function(b){b.classList.contains("bc-video-initialized")||(b.classList.add("bc-video-initialized"),new c(b))})});"use strict";q=function(){function c(b,c){for(var d=0;d<c.length;d++){var a=c[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,d){e&&c(b.prototype,e);d&&c(b,d);return b}}();g.when("boxUtility",
"debounce","ready").register("StickyHeader",function(c,b){var e=function(){function d(a,b){t(this,d);this.triggerElement=a;this.stickyElement=b;this.start()}q(d,[{key:"start",value:function(){n.addEventListener("scroll",b(this.scrollHandler.bind(this),100));this.scrollHandler()}},{key:"show",value:function(){this.stickyElement.classList.add("bc-sticky-header-active")}},{key:"hide",value:function(){this.stickyElement.classList.remove("bc-sticky-header-active")}},{key:"scrollHandler",value:function(){var a=
c.isInView(this.triggerElement),b=0>c.getViewportOffset(this.triggerElement).top;!a&&b?this.show():this.hide()}}],[{key:"initialize",value:function(){var a=document.getElementsByClassName("bc-trigger-sticky"),b=document.getElementsByClassName("bc-sticky-header");Array.prototype.forEach.call(b,function(a){document.body.appendChild(a)});return Array.prototype.map.call(a,function(a){var b=a.dataset&&document.getElementById(a.dataset.trigger);if(b)return new d(a,b)})}}]);return d}();e.initialize();return e});
"use strict";g.when("refMarkers","accessibleClick","ready","desktop").register("skiplinkInit",function(c,b){function e(a){if(!(a&&a.id&&a.classList&&a.classList.contains("bc-a11y-skiplink")))throw"Not a skiplink";var e=a.getAttribute("data-bc-skiplink-target"),g=e&&document.getElementById(e),e=a.getAttribute("data-bc-skiplink-feature"),k=c.build(e,this);if(!d(g))throw a.setAttribute("tabindex","-1"),"Not a valid skiplink target";b.addEventListener(a,function(b){a&&a.id&&a.classList&&a.classList.contains("bc-a11y-skiplink")&&
d(g)&&(b.preventDefault(),document.getElementById(g.id).focus());c.post(k)})}function d(a){return a&&a.id&&a.classList&&a.classList.contains("bc-a11y-skiplink-target")}return{init:function(a){a.querySelectorAll(".bc-a11y-skiplink").forEach(function(a){return e(a)})}}});g.when("skiplinkInit").execute(function(c){c.init(document)});"use strict";g.when("ready","desktop").register("flyoutInit",function(){function c(b){var a=b.getAttribute("data-trigger"),c=a?b.querySelector("#"+a):null,e=0;return c?function(){c.classList.remove("bc-hidden");
if(e!==n.innerWidth){var a=c.offsetWidth;if(0<a){var g=b.offsetWidth,l=b.offsetLeft;if(1020!==a)c.style.left=l+g/2-a/2-10+"px";else{var a=document.querySelector(".bc-container").offsetLeft,q=c.querySelector(".bc-flyout-beak");c.style.left=a+"px";q.style.left=l-a+g/2-10+5+"px"}}e=n.innerWidth}}:null}function b(b){var a=(b=b.getAttribute("data-trigger"))?document.getElementById(b):null;return a?function(){a.classList.add("bc-hidden")}:null}function e(b){var a=(b=b.getAttribute("data-trigger"))?document.getElementById(b):
null;return a?function(){a.classList.toggle("bc-hidden")}:null}return function(d){d=d.querySelectorAll(".bc-trigger-flyout");var a,f=d.length;if(0!==f)for(a=0;a<f;a+=1)if(d[a].getAttribute("data-trigger")){var g=b(d[a]),k=c(d[a]),h=e(d[a]);d[a].addEventListener("mouseover",k);d[a].addEventListener("mouseout",g);d[a].addEventListener("click",h)}}});g.when("flyoutInit").execute(function(c){c(document)});"use strict";g.when("Spinner").register("processing",function(c){return function(b){n.console&&console.warn&&
console.warn("BrickCity.processing is deprecated, see spinner");b=new c(b);return{activate:b.start.bind(b),deactivate:b.stop.bind(b),kill:b.remove.bind(b)}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("AudibleBrickCitySkin",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
